import{GLTFLoader as e}from"./glTFLoader-Cy3hFpAv.esm.min.js";import{bS as a,bR as o}from"./index-C7lpuH7l.esm.min.js";import"./bone-C8BOn9ne.esm.min.js";import"./skeleton-CpeT1KDV.esm.min.js";import"./rawTexture-GcKYJ37d.esm.min.js";import"./assetContainer-BpinJ-Pb.esm.min.js";import"./objectModelMapping-EW6prSP3.esm.min.js";const r="KHR_materials_clearcoat";class t{constructor(e){this.name=r,this.order=190,this._loader=e,this.enabled=this._loader.isExtensionUsed(r)}dispose(){this._loader=null}loadMaterialPropertiesAsync(a,o,r){return e.LoadExtensionAsync(a,o,this.name,(async(e,t)=>{const s=new Array;s.push(this._loader.loadMaterialPropertiesAsync(a,o,r)),s.push(this._loadClearCoatPropertiesAsync(e,t,r)),await Promise.all(s)}))}_loadClearCoatPropertiesAsync(e,a,o){const r=this._loader._getOrCreateMaterialAdapter(o),t=new Array;return r.configureCoat(),r.coatWeight=void 0!==a.clearcoatFactor?a.clearcoatFactor:0,r.coatRoughness=void 0!==a.clearcoatRoughnessFactor?a.clearcoatRoughnessFactor:0,a.clearcoatTexture&&t.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatTexture`,a.clearcoatTexture,(e=>{e.name=`${o.name} (ClearCoat)`,r.coatWeightTexture=e}))),a.clearcoatRoughnessTexture&&(a.clearcoatRoughnessTexture.nonColorData=!0,t.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatRoughnessTexture`,a.clearcoatRoughnessTexture,(e=>{e.name=`${o.name} (ClearCoat Roughness)`,r.coatRoughnessTexture=e})))),a.clearcoatNormalTexture&&(a.clearcoatNormalTexture.nonColorData=!0,t.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatNormalTexture`,a.clearcoatNormalTexture,(e=>{e.name=`${o.name} (ClearCoat Normal)`,r.geometryCoatNormalTexture=e,null!=a.clearcoatNormalTexture?.scale&&(r.geometryCoatNormalTextureScale=a.clearcoatNormalTexture.scale)}))),r.setNormalMapInversions(!o.getScene().useRightHandedSystem,o.getScene().useRightHandedSystem)),Promise.all(t).then((()=>{}))}}a(r),o(r,!0,(e=>new t(e)));export{t as KHR_materials_clearcoat};
//# sourceMappingURL=KHR_materials_clearcoat-C2sEMDpD.esm.min.js.map
