import{F as t,e as o}from"./KHR_interactivity-CUrUlNIJ.esm.min.js";import{j as e,l as r,f as s,h as a,m as n,g as c,n as l,R as i}from"./declarationMapper-Bi-SHLUs.esm.min.js";import{Q as u,cd as h,b as p,z as m,g as w}from"./index-C7lpuH7l.esm.min.js";import{F as x}from"./flowGraphBinaryOperationBlock-D1MrVzMs.esm.min.js";import{F as d}from"./flowGraphUnaryOperationBlock-DrOy5Tmv.esm.min.js";import"./objectModelMapping-EW6prSP3.esm.min.js";import"./flowGraphCachedOperationBlock-BBhdYHVN.esm.min.js";function g(t,o){const e=new u;return function(t,o,e){const r=p.Cross(t,o),s=Math.acos(h(function(t,o){return t.x*o.x+t.y*o.y+t.z*o.z}(t,o),-1,1));u.RotationAxisToRef(r,s,e)}(t,o,e),e}const V="cachedOperationAxis",F="cachedOperationAngle",f="cachedExecutionId";class B extends d{constructor(t){super(i,s,(t=>this._polymorphicLength(t)),"FlowGraphLengthBlock",t)}_polymorphicLength(t){switch(o(t)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return t.length();default:throw new Error(`Cannot compute length of value ${t}`)}}}w("FlowGraphLengthBlock",B);class k extends d{constructor(t){super(i,i,(t=>this._polymorphicNormalize(t)),"FlowGraphNormalizeBlock",t)}_polymorphicNormalize(t){let e;switch(o(t)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":if(e=t.normalizeToNew(),this.config?.nanOnZeroLength){0===t.length()&&e.setAll(NaN)}return e;default:throw new Error(`Cannot normalize value ${t}`)}}}w("FlowGraphNormalizeBlock",k);class G extends x{constructor(t){super(i,i,s,((t,o)=>this._polymorphicDot(t,o)),"FlowGraphDotBlock",t)}_polymorphicDot(t,e){switch(o(t)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return t.dot(e);default:throw new Error(`Cannot get dot product of ${t} and ${e}`)}}}w("FlowGraphDotBlock",G);class y extends x{constructor(t){super(e,e,e,((t,o)=>p.Cross(t,o)),"FlowGraphCrossBlock",t)}}w("FlowGraphCrossBlock",y);class A extends x{constructor(t){super(l,s,l,((t,o)=>t.rotate(o)),"FlowGraphRotate2DBlock",t)}}w("FlowGraphRotate2DBlock",A);class z extends x{constructor(t){super(e,r,e,((t,o)=>t.applyRotationQuaternion(o)),"FlowGraphRotate3DBlock",t)}}function C(t,e){switch(o(t)){case"Vector2":case"Vector3":return e.transformVector(t);case"Vector4":return new m(t.x*e.m[0]+t.y*e.m[1]+t.z*e.m[2]+t.w*e.m[3],t.x*e.m[4]+t.y*e.m[5]+t.z*e.m[6]+t.w*e.m[7],t.x*e.m[8]+t.y*e.m[9]+t.z*e.m[10]+t.w*e.m[11],t.x*e.m[12]+t.y*e.m[13]+t.z*e.m[14]+t.w*e.m[15]);default:throw new Error(`Cannot transform value ${t}`)}}w("FlowGraphRotate3DBlock",z);class D extends x{constructor(t){const o=t?.vectorType||"Vector3",e="Vector2"===o?"Matrix2D":"Vector3"===o?"Matrix3D":"Matrix";super(c(o),c(e),c(o),C,"FlowGraphTransformVectorBlock",t)}}w("FlowGraphTransformVectorBlock",D);class _ extends x{constructor(t){super(e,n,e,((t,o)=>p.TransformCoordinates(t,o)),"FlowGraphTransformCoordinatesBlock",t)}}w("FlowGraphTransformCoordinatesBlock",_);class j extends d{constructor(t){super(r,r,(t=>t.conjugate()),"FlowGraphConjugateBlock",t)}}w("FlowGraphConjugateBlock",j);class E extends x{constructor(t){super(r,r,s,((t,o)=>function(t,o){return 2*Math.acos(h((r=o,(e=t).x*r.x+e.y*r.y+e.z*r.z+e.w*r.w),-1,1));var e,r}(t,o)),"FlowGraphAngleBetweenBlock",t)}}w("FlowGraphAngleBetweenBlock",E);class O extends x{constructor(t){super(e,s,r,((t,o)=>u.RotationAxis(t,o)),"FlowGraphQuaternionFromAxisAngleBlock",t)}}w("FlowGraphQuaternionFromAxisAngleBlock",O);class Q extends t{constructor(t){super(t),this.a=this.registerDataInput("a",r),this.axis=this.registerDataOutput("axis",e),this.angle=this.registerDataOutput("angle",s),this.isValid=this.registerDataOutput("isValid",a)}_updateOutputs(t){const o=t._getExecutionVariable(this,f,-1),e=t._getExecutionVariable(this,V,null),r=t._getExecutionVariable(this,F,null);if(null!=e&&null!=r&&o===t.executionId)this.axis.setValue(e,t),this.angle.setValue(r,t);else try{const{axis:o,angle:e}=this.a.getValue(t).toAxisAngle();t._setExecutionVariable(this,V,o),t._setExecutionVariable(this,F,e),t._setExecutionVariable(this,f,t.executionId),this.axis.setValue(o,t),this.angle.setValue(e,t),this.isValid.setValue(!0,t)}catch(o){this.isValid.setValue(!1,t)}}getClassName(){return"FlowGraphAxisAngleFromQuaternionBlock"}}w("FlowGraphAxisAngleFromQuaternionBlock",Q);class R extends x{constructor(t){super(e,e,r,((t,o)=>g(t,o)),"FlowGraphQuaternionFromDirectionsBlock",t)}}export{E as FlowGraphAngleBetweenBlock,Q as FlowGraphAxisAngleFromQuaternionBlock,j as FlowGraphConjugateBlock,y as FlowGraphCrossBlock,G as FlowGraphDotBlock,B as FlowGraphLengthBlock,k as FlowGraphNormalizeBlock,O as FlowGraphQuaternionFromAxisAngleBlock,R as FlowGraphQuaternionFromDirectionsBlock,A as FlowGraphRotate2DBlock,z as FlowGraphRotate3DBlock,D as FlowGraphTransformBlock,_ as FlowGraphTransformCoordinatesBlock};
//# sourceMappingURL=flowGraphVectorMathBlocks-NlU9vmJC.esm.min.js.map
