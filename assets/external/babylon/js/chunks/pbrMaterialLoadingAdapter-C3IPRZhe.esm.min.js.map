{"version":3,"file":"pbrMaterialLoadingAdapter-C3IPRZhe.esm.min.js","sources":["../../../../../dev/loaders/dist/glTF/2.0/pbrMaterialLoadingAdapter.js"],"sourcesContent":["import { Color3 } from \"core/Maths/math.color\";\nimport { Vector3 } from \"core/Maths/math.vector\";\nimport { Constants } from \"core/Engines/constants\";\n/**\n * Material Loading Adapter for PBR materials that provides a unified OpenPBR-like interface.\n */\nexport class PBRMaterialLoadingAdapter {\n    /**\n     * Creates a new instance of the PBRMaterialLoadingAdapter.\n     * @param material - The PBR material to adapt.\n     */\n    constructor(material) {\n        this._extinctionCoefficient = Vector3.Zero();\n        this._material = material;\n        this._material.enableSpecularAntiAliasing = true;\n    }\n    /**\n     * Gets the underlying material\n     */\n    get material() {\n        return this._material;\n    }\n    /**\n     * Whether the material should be treated as unlit\n     */\n    get isUnlit() {\n        return this._material.unlit;\n    }\n    /**\n     * Sets whether the material should be treated as unlit\n     */\n    set isUnlit(value) {\n        this._material.unlit = value;\n    }\n    // ========================================\n    // CULLING PROPERTIES\n    // ========================================\n    /**\n     * Sets whether back face culling is enabled.\n     * @param value True to enable back face culling\n     */\n    set backFaceCulling(value) {\n        this._material.backFaceCulling = value;\n    }\n    /**\n     * Gets whether back face culling is enabled.\n     * @returns True if back face culling is enabled\n     */\n    get backFaceCulling() {\n        return this._material.backFaceCulling;\n    }\n    /**\n     * Sets whether two-sided lighting is enabled.\n     * @param value True to enable two-sided lighting\n     */\n    set twoSidedLighting(value) {\n        this._material.twoSidedLighting = value;\n    }\n    /**\n     * Gets whether two-sided lighting is enabled.\n     * @returns True if two-sided lighting is enabled\n     */\n    get twoSidedLighting() {\n        return this._material.twoSidedLighting;\n    }\n    // ========================================\n    // ALPHA PROPERTIES\n    // ========================================\n    /**\n     * Sets the alpha cutoff value for alpha testing.\n     * @param value The alpha cutoff threshold (0-1)\n     */\n    set alphaCutOff(value) {\n        this._material.alphaCutOff = value;\n    }\n    /**\n     * Gets the alpha cutoff value.\n     * @returns The alpha cutoff threshold (0-1)\n     */\n    get alphaCutOff() {\n        return this._material.alphaCutOff;\n    }\n    /**\n     * Sets whether to use alpha from the albedo texture.\n     * @param value True to use alpha from albedo texture\n     */\n    set useAlphaFromBaseColorTexture(value) {\n        this._material.useAlphaFromAlbedoTexture = value;\n    }\n    /**\n     * Gets whether alpha is used from the albedo texture.\n     * @returns True if using alpha from albedo texture\n     */\n    get useAlphaFromBaseColorTexture() {\n        return this._material.useAlphaFromAlbedoTexture;\n    }\n    /**\n     * Gets whether the transparency is treated as alpha coverage.\n     */\n    get transparencyAsAlphaCoverage() {\n        return this._material.useRadianceOverAlpha || this._material.useSpecularOverAlpha;\n    }\n    /**\n     * Sets/Gets whether the transparency is treated as alpha coverage\n     */\n    set transparencyAsAlphaCoverage(value) {\n        this._material.useRadianceOverAlpha = !value;\n        this._material.useSpecularOverAlpha = !value;\n    }\n    // ========================================\n    // BASE PARAMETERS\n    // ========================================\n    /**\n     * Sets the base color of the material (mapped to PBR albedoColor).\n     * @param value The base color as a Color3\n     */\n    set baseColor(value) {\n        this._material.albedoColor = value;\n    }\n    /**\n     * Gets the base color of the material.\n     * @returns The base color as a Color3\n     */\n    get baseColor() {\n        return this._material.albedoColor;\n    }\n    /**\n     * Sets the base color texture of the material (mapped to PBR albedoTexture).\n     * @param value The base color texture or null\n     */\n    set baseColorTexture(value) {\n        this._material.albedoTexture = value;\n    }\n    /**\n     * Gets the base color texture of the material.\n     * @returns The base color texture or null\n     */\n    get baseColorTexture() {\n        return this._material.albedoTexture;\n    }\n    /**\n     * Sets the base diffuse roughness of the material.\n     * @param value The diffuse roughness value (0-1)\n     */\n    set baseDiffuseRoughness(value) {\n        this._material.baseDiffuseRoughness = value;\n        if (value > 0) {\n            this._material.brdf.baseDiffuseModel = Constants.MATERIAL_DIFFUSE_MODEL_E_OREN_NAYAR;\n        }\n    }\n    /**\n     * Gets the base diffuse roughness of the material.\n     * @returns The diffuse roughness value (0-1), defaults to 0 if not set\n     */\n    get baseDiffuseRoughness() {\n        return this._material.baseDiffuseRoughness ?? 0;\n    }\n    /**\n     * Sets the base diffuse roughness texture of the material.\n     * @param value The diffuse roughness texture or null\n     */\n    set baseDiffuseRoughnessTexture(value) {\n        this._material.baseDiffuseRoughnessTexture = value;\n    }\n    /**\n     * Gets the base diffuse roughness texture of the material.\n     * @returns The diffuse roughness texture or null\n     */\n    get baseDiffuseRoughnessTexture() {\n        return this._material.baseDiffuseRoughnessTexture;\n    }\n    /**\n     * Sets the base metalness value of the material (mapped to PBR metallic).\n     * @param value The metalness value (0-1)\n     */\n    set baseMetalness(value) {\n        this._material.metallic = value;\n    }\n    /**\n     * Gets the base metalness value of the material.\n     * @returns The metalness value (0-1), defaults to 1 if not set\n     */\n    get baseMetalness() {\n        return this._material.metallic ?? 1;\n    }\n    /**\n     * Sets the base metalness texture of the material (mapped to PBR metallicTexture).\n     * @param value The metalness texture or null\n     */\n    set baseMetalnessTexture(value) {\n        this._material.metallicTexture = value;\n    }\n    /**\n     * Gets the base metalness texture of the material.\n     * @returns The metalness texture or null\n     */\n    get baseMetalnessTexture() {\n        return this._material.metallicTexture;\n    }\n    /**\n     * Sets whether to use roughness from the metallic texture's green channel.\n     * Also disables using roughness from the alpha channel when enabled.\n     * @param value True to use green channel for roughness\n     */\n    set useRoughnessFromMetallicTextureGreen(value) {\n        this._material.useRoughnessFromMetallicTextureGreen = value;\n        this._material.useRoughnessFromMetallicTextureAlpha = !value;\n    }\n    /**\n     * Sets whether to use metalness from the metallic texture's blue channel.\n     * @param value True to use blue channel for metalness\n     */\n    set useMetallicFromMetallicTextureBlue(value) {\n        this._material.useMetallnessFromMetallicTextureBlue = value;\n    }\n    // ========================================\n    // SPECULAR PARAMETERS\n    // ========================================\n    /**\n     * Configures specular properties and optionally enables OpenPBR BRDF model for edge color support.\n     * @param enableEdgeColor Whether to enable OpenPBR BRDF models for edge color support\n     */\n    enableSpecularEdgeColor(enableEdgeColor = false) {\n        if (enableEdgeColor) {\n            this._material.brdf.dielectricSpecularModel = Constants.MATERIAL_DIELECTRIC_SPECULAR_MODEL_OPENPBR;\n            this._material.brdf.conductorSpecularModel = Constants.MATERIAL_CONDUCTOR_SPECULAR_MODEL_OPENPBR;\n        }\n    }\n    /**\n     * Sets the specular weight (mapped to PBR metallicF0Factor).\n     * @param value The specular weight value\n     */\n    set specularWeight(value) {\n        this._material.metallicF0Factor = value;\n    }\n    /**\n     * Gets the specular weight.\n     * @returns The specular weight value, defaults to 1 if not set\n     */\n    get specularWeight() {\n        return this._material.metallicF0Factor ?? 1;\n    }\n    /**\n     * Sets the specular weight texture (mapped to PBR metallicReflectanceTexture).\n     * Configures the material to use only metalness from this texture when set.\n     * @param value The specular weight texture or null\n     */\n    set specularWeightTexture(value) {\n        if (value) {\n            this._material.metallicReflectanceTexture = value;\n            this._material.useOnlyMetallicFromMetallicReflectanceTexture = true;\n        }\n        else {\n            this._material.metallicReflectanceTexture = null;\n            this._material.useOnlyMetallicFromMetallicReflectanceTexture = false;\n        }\n    }\n    /**\n     * Gets the specular weight texture.\n     * @returns The specular weight texture or null\n     */\n    get specularWeightTexture() {\n        return this._material.metallicReflectanceTexture;\n    }\n    /**\n     * Sets the specular color (mapped to PBR metallicReflectanceColor).\n     * @param value The specular color as a Color3\n     */\n    set specularColor(value) {\n        this._material.metallicReflectanceColor = value;\n    }\n    /**\n     * Gets the specular color.\n     * @returns The specular color as a Color3\n     */\n    get specularColor() {\n        return this._material.metallicReflectanceColor;\n    }\n    /**\n     * Sets the specular color texture (mapped to PBR reflectanceTexture).\n     * @param value The specular color texture or null\n     */\n    set specularColorTexture(value) {\n        this._material.reflectanceTexture = value;\n    }\n    /**\n     * Gets the specular color texture.\n     * @returns The specular color texture or null\n     */\n    get specularColorTexture() {\n        return this._material.reflectanceTexture;\n    }\n    /**\n     * Sets the specular roughness (mapped to PBR roughness).\n     * @param value The roughness value (0-1)\n     */\n    set specularRoughness(value) {\n        this._material.roughness = value;\n    }\n    /**\n     * Gets the specular roughness.\n     * @returns The roughness value (0-1), defaults to 1 if not set\n     */\n    get specularRoughness() {\n        return this._material.roughness ?? 1;\n    }\n    /**\n     * Sets the specular roughness texture.\n     * Note: PBR uses the same texture for both metallic and roughness,\n     * so this only sets the texture if no base metalness texture exists.\n     * @param value The roughness texture or null\n     */\n    set specularRoughnessTexture(value) {\n        // PBR uses the same texture for both metallic and roughness\n        if (!this.baseMetalnessTexture) {\n            this._material.metallicTexture = value;\n        }\n    }\n    /**\n     * Gets the specular roughness texture.\n     * @returns The roughness texture (same as metallic texture for PBR) or null\n     */\n    get specularRoughnessTexture() {\n        return this._material.metallicTexture;\n    }\n    /**\n     * Sets the specular index of refraction (mapped to PBR indexOfRefraction).\n     * @param value The IOR value\n     */\n    set specularIor(value) {\n        this._material.indexOfRefraction = value;\n    }\n    /**\n     * Gets the specular index of refraction.\n     * @returns The IOR value\n     */\n    get specularIor() {\n        return this._material.indexOfRefraction;\n    }\n    // ========================================\n    // EMISSION PARAMETERS\n    // ========================================\n    /**\n     * Sets the emission color (mapped to PBR emissiveColor).\n     * @param value The emission color as a Color3\n     */\n    set emissionColor(value) {\n        this._material.emissiveColor = value;\n    }\n    /**\n     * Gets the emission color.\n     * @returns The emission color as a Color3\n     */\n    get emissionColor() {\n        return this._material.emissiveColor;\n    }\n    /**\n     * Sets the emission luminance/intensity (mapped to PBR emissiveIntensity).\n     * @param value The emission intensity value\n     */\n    set emissionLuminance(value) {\n        this._material.emissiveIntensity = value;\n    }\n    /**\n     * Gets the emission luminance/intensity.\n     * @returns The emission intensity value\n     */\n    get emissionLuminance() {\n        return this._material.emissiveIntensity;\n    }\n    /**\n     * Sets the emission color texture (mapped to PBR emissiveTexture).\n     * @param value The emission texture or null\n     */\n    set emissionColorTexture(value) {\n        this._material.emissiveTexture = value;\n    }\n    /**\n     * Gets the emission color texture.\n     * @returns The emission texture or null\n     */\n    get emissionColorTexture() {\n        return this._material.emissiveTexture;\n    }\n    // ========================================\n    // AMBIENT OCCLUSION\n    // ========================================\n    /**\n     * Sets the ambient occlusion texture (mapped to PBR ambientTexture).\n     * Automatically enables grayscale mode when set.\n     * @param value The ambient occlusion texture or null\n     */\n    set ambientOcclusionTexture(value) {\n        this._material.ambientTexture = value;\n        if (value) {\n            this._material.useAmbientInGrayScale = true;\n        }\n    }\n    /**\n     * Gets the ambient occlusion texture.\n     * @returns The ambient occlusion texture or null\n     */\n    get ambientOcclusionTexture() {\n        return this._material.ambientTexture;\n    }\n    /**\n     * Sets the ambient occlusion texture strength.\n     * @param value The strength value (typically 0-1)\n     */\n    set ambientOcclusionTextureStrength(value) {\n        this._material.ambientTextureStrength = value;\n    }\n    /**\n     * Gets the ambient occlusion texture strength.\n     * @returns The strength value, defaults to 1.0 if not set\n     */\n    get ambientOcclusionTextureStrength() {\n        return this._material.ambientTextureStrength ?? 1.0;\n    }\n    // ========================================\n    // COAT PARAMETERS\n    // ========================================\n    /**\n     * Configures clear coat for PBR material.\n     * Enables clear coat and sets up proper configuration.\n     */\n    configureCoat() {\n        this._material.clearCoat.isEnabled = true;\n        this._material.clearCoat.useRoughnessFromMainTexture = false;\n        this._material.clearCoat.remapF0OnInterfaceChange = false;\n    }\n    /**\n     * Sets the coat weight (mapped to PBR clearCoat.intensity).\n     * Automatically enables clear coat.\n     * @param value The coat weight value (0-1)\n     */\n    set coatWeight(value) {\n        this._material.clearCoat.isEnabled = true;\n        this._material.clearCoat.intensity = value;\n    }\n    /**\n     * Gets the coat weight.\n     * @returns The coat weight value\n     */\n    get coatWeight() {\n        return this._material.clearCoat.intensity;\n    }\n    /**\n     * Sets the coat weight texture (mapped to PBR clearCoat.texture).\n     * Automatically enables clear coat.\n     * @param value The coat weight texture or null\n     */\n    set coatWeightTexture(value) {\n        this._material.clearCoat.isEnabled = true;\n        this._material.clearCoat.texture = value;\n    }\n    /**\n     * Gets the coat weight texture.\n     * @returns The coat weight texture or null\n     */\n    get coatWeightTexture() {\n        return this._material.clearCoat.texture;\n    }\n    /**\n     * Sets the coat color (mapped to PBR clearCoat.tintColor).\n     * @param value The coat tint color as a Color3\n     */\n    set coatColor(value) {\n        this._material.clearCoat.isTintEnabled = value != Color3.White();\n        this._material.clearCoat.tintColor = value;\n    }\n    /**\n     * Sets the coat color texture (mapped to PBR clearCoat.tintTexture).\n     * @param value The coat color texture or null\n     */\n    set coatColorTexture(value) {\n        this._material.clearCoat.tintTexture = value;\n    }\n    /**\n     * Sets the coat roughness (mapped to PBR clearCoat.roughness).\n     * Automatically enables clear coat.\n     * @param value The coat roughness value (0-1)\n     */\n    set coatRoughness(value) {\n        this._material.clearCoat.isEnabled = true;\n        this._material.clearCoat.roughness = value;\n    }\n    /**\n     * Gets the coat roughness.\n     * @returns The coat roughness value, defaults to 0 if not set\n     */\n    get coatRoughness() {\n        return this._material.clearCoat.roughness ?? 0;\n    }\n    /**\n     * Sets the coat roughness texture (mapped to PBR clearCoat.textureRoughness).\n     * Automatically enables clear coat and disables using roughness from main texture.\n     * @param value The coat roughness texture or null\n     */\n    set coatRoughnessTexture(value) {\n        this._material.clearCoat.isEnabled = true;\n        this._material.clearCoat.useRoughnessFromMainTexture = false;\n        this._material.clearCoat.textureRoughness = value;\n    }\n    /**\n     * Gets the coat roughness texture.\n     * @returns The coat roughness texture or null\n     */\n    get coatRoughnessTexture() {\n        return this._material.clearCoat.textureRoughness;\n    }\n    /**\n     * Sets the coat index of refraction (IOR).\n     */\n    set coatIor(value) {\n        this._material.clearCoat.indexOfRefraction = value;\n    }\n    /**\n     * Sets the coat darkening value.\n     * Note: PBR doesn't have a direct coat darkening property, so this is a no-op.\n     * @param value The coat darkening value (ignored for PBR)\n     */\n    set coatDarkening(value) {\n        // PBR doesn't have a coat darkening property\n    }\n    /**\n     * Sets the coat darkening texture\n     * @param value The coat darkening texture or null\n     */\n    set coatDarkeningTexture(value) {\n        // PBR doesn't have a coat darkening property\n    }\n    /**\n     * Sets the coat roughness anisotropy.\n     * Note: PBR clearCoat doesn't support anisotropy yet, so this is a placeholder.\n     * @param value The coat anisotropy intensity value (currently ignored)\n     */\n    set coatRoughnessAnisotropy(value) {\n        // TODO: Implement when PBR clearCoat anisotropy becomes available\n        // this._material.clearCoat.anisotropy = value;\n    }\n    /**\n     * Gets the coat roughness anisotropy.\n     * Note: PBR clearCoat doesn't support anisotropy yet, so this returns 0.\n     * @returns Currently returns 0 as clearCoat anisotropy is not yet available\n     */\n    get coatRoughnessAnisotropy() {\n        // TODO: Implement when PBR clearCoat anisotropy becomes available\n        // return this._material.clearCoat.anisotropy ?? 0;\n        return 0;\n    }\n    /**\n     * Sets the coat tangent angle for anisotropy.\n     * Note: PBR clearCoat doesn't support anisotropy yet, so this is a placeholder.\n     * @param value The coat anisotropy rotation angle in radians (currently ignored)\n     */\n    set geometryCoatTangentAngle(value) {\n        // TODO: Implement when PBR clearCoat anisotropy becomes available\n        // this._material.clearCoat.anisotropyAngle = value;\n    }\n    /**\n     * Sets the coat tangent texture for anisotropy.\n     * Note: PBR clearCoat doesn't support anisotropy textures yet, so this is a placeholder.\n     * @param value The coat anisotropy texture (currently ignored)\n     */\n    set geometryCoatTangentTexture(value) {\n        // TODO: Implement when PBR clearCoat anisotropy becomes available\n        // this._material.clearCoat.anisotropyTangentTexture = value;\n    }\n    /**\n     * Gets the coat tangent texture for anisotropy.\n     * Note: PBR clearCoat doesn't support anisotropy textures yet, so this returns null.\n     * @returns Currently returns null as clearCoat anisotropy is not yet available\n     */\n    get geometryCoatTangentTexture() {\n        // TODO: Implement when PBR clearCoat anisotropy becomes available\n        // return this._material.clearCoat.anisotropyTangentTexture;\n        return null;\n    }\n    // ========================================\n    // TRANSMISSION LAYER\n    // ========================================\n    /**\n     * Sets the transmission weight (mapped to PBR subSurface.refractionIntensity).\n     * Enables refraction when value \\> 0.\n     * @param value The transmission weight value (0-1)\n     */\n    set transmissionWeight(value) {\n        this._material.subSurface.isRefractionEnabled = value > 0;\n        this._material.subSurface.refractionIntensity = value;\n    }\n    /**\n     * Gets the transmission weight.\n     * @returns The transmission weight value\n     */\n    get transmissionWeight() {\n        return this._material.subSurface.isRefractionEnabled ? this._material.subSurface.refractionIntensity : 0;\n    }\n    /**\n     * Sets the transmission weight texture (mapped to PBR subSurface.refractionIntensityTexture).\n     * Automatically enables refraction and glTF-style textures.\n     * @param value The transmission weight texture or null\n     */\n    set transmissionWeightTexture(value) {\n        this._material.subSurface.isRefractionEnabled = true;\n        this._material.subSurface.refractionIntensityTexture = value;\n        this._material.subSurface.useGltfStyleTextures = true;\n    }\n    /**\n     * Sets the attenuation distance for volume.\n     * @param value The attenuation distance value\n     */\n    set transmissionDepth(value) {\n        if (this.transmissionWeight > 0) {\n            this._material.subSurface.tintColorAtDistance = value;\n        }\n        else if (this.subsurfaceWeight > 0) {\n            this._material.subSurface.diffusionDistance.multiplyInPlace(new Color3(value, value, value));\n        }\n    }\n    /**\n     * Gets the attenuation distance for volume.\n     * @returns The attenuation distance value\n     */\n    get transmissionDepth() {\n        if (this.transmissionWeight > 0) {\n            return this._material.subSurface.tintColorAtDistance;\n        }\n        return 0;\n    }\n    /**\n     * Sets the attenuation color (mapped to PBR subSurface.tintColor).\n     * @param value The attenuation color as a Color3\n     */\n    set transmissionColor(value) {\n        if (this.transmissionWeight > 0) {\n            this._material.subSurface.tintColor = value;\n        }\n        else if (this.subsurfaceWeight > 0) {\n            this._material.subSurface.diffusionDistance.multiplyInPlace(value);\n        }\n    }\n    /**\n     * Sets the attenuation color (mapped to PBR subSurface.tintColor).\n     * @returns The attenuation color as a Color3\n     */\n    get transmissionColor() {\n        if (this.transmissionWeight > 0) {\n            return this._material.subSurface.tintColor;\n        }\n        else if (this.subsurfaceWeight > 0) {\n            return this._material.subSurface.diffusionDistance;\n        }\n        return new Color3(0, 0, 0);\n    }\n    /**\n     * Sets the transmission scatter coefficient.\n     * @param value The scatter coefficient as a Color3\n     */\n    set transmissionScatter(value) {\n        // TODO convert from scatter coefficient to diffusion distance\n        this._material.subSurface.diffusionDistance = value;\n    }\n    /**\n     * Sets the transmission scatter coefficient.\n     * @returns The scatter coefficient as a Color3\n     */\n    get transmissionScatter() {\n        // TODO convert from diffusion distance to scatter coefficient\n        return this._material.subSurface.diffusionDistance;\n    }\n    /**\n     * Sets the transmission scattering anisotropy.\n     * @param value The anisotropy intensity value (-1 to 1)\n     */\n    set transmissionScatterAnisotropy(value) {\n        // No direct mapping in PBRMaterial\n    }\n    /**\n     * Sets the transmission dispersion Abbe number.\n     * @param value The Abbe number value\n     */\n    set transmissionDispersionAbbeNumber(value) {\n        // PBRMaterial assumes a fixed Abbe number of 20.0 for dispersion calculations.\n    }\n    /**\n     * Sets the transmission dispersion scale.\n     * @param value The dispersion scale value\n     */\n    set transmissionDispersionScale(value) {\n        if (value > 0) {\n            this._material.subSurface.isDispersionEnabled = true;\n            this._material.subSurface.dispersion = 20.0 / value;\n        }\n        else {\n            this._material.subSurface.isDispersionEnabled = false;\n            this._material.subSurface.dispersion = 0;\n        }\n    }\n    /**\n     * Gets the refraction background texture\n     * @returns The refraction background texture or null\n     */\n    get refractionBackgroundTexture() {\n        return this._material.subSurface.refractionTexture;\n    }\n    /**\n     * Sets the refraction background texture\n     * @param value The refraction background texture or null\n     */\n    set refractionBackgroundTexture(value) {\n        this._material.subSurface.refractionTexture = value;\n    }\n    /**\n     * Configures transmission for thin-surface transmission (KHR_materials_transmission).\n     * Sets up the material for proper thin-surface transmission behavior.\n     */\n    configureTransmission() {\n        // Since this extension models thin-surface transmission only, we must make IOR = 1.0\n        this._material.subSurface.volumeIndexOfRefraction = 1.0;\n        // Albedo colour will tint transmission.\n        this._material.subSurface.useAlbedoToTintRefraction = true;\n        this._material.subSurface.minimumThickness = 0.0;\n        this._material.subSurface.maximumThickness = 0.0;\n    }\n    // ========================================\n    // VOLUME PROPERTIES\n    // ========================================\n    /**\n     * Sets the thickness texture (mapped to PBR subSurface.thicknessTexture).\n     * Automatically enables refraction.\n     * @param value The thickness texture or null\n     */\n    set volumeThicknessTexture(value) {\n        this._material.subSurface.thicknessTexture = value;\n        this._material.subSurface.useGltfStyleTextures = true;\n    }\n    /**\n     * Sets the thickness factor (mapped to PBR subSurface.maximumThickness).\n     * Automatically enables refraction.\n     * @param value The thickness value\n     */\n    set volumeThickness(value) {\n        this._material.subSurface.minimumThickness = 0.0;\n        this._material.subSurface.maximumThickness = value;\n        this._material.subSurface.useThicknessAsDepth = true;\n        if (value > 0) {\n            this._material.subSurface.volumeIndexOfRefraction = this._material.indexOfRefraction;\n        }\n    }\n    // ========================================\n    // SUBSURFACE PROPERTIES (Subsurface Scattering)\n    // ========================================\n    /**\n     * Configures subsurface properties for PBR material\n     */\n    configureSubsurface() {\n        this._material.subSurface.useGltfStyleTextures = true;\n        // Since this extension models thin-surface transmission only, we must make the\n        // internal IOR == 1.0 and set the thickness to 0.\n        this._material.subSurface.volumeIndexOfRefraction = 1.0;\n        this._material.subSurface.minimumThickness = 0.0;\n        this._material.subSurface.maximumThickness = 0.0;\n        // Tint color will be used for transmission.\n        this._material.subSurface.useAlbedoToTintTranslucency = false;\n    }\n    /**\n     * Sets the extinction coefficient of the volume.\n     * @param value The extinction coefficient as a Vector3\n     */\n    set extinctionCoefficient(value) {\n        this._extinctionCoefficient = value;\n    }\n    /**\n     * Gets the extinction coefficient of the volume.\n     */\n    get extinctionCoefficient() {\n        return this._extinctionCoefficient;\n    }\n    /**\n     * Sets the subsurface weight\n     */\n    set subsurfaceWeight(value) {\n        this._material.subSurface.isTranslucencyEnabled = value > 0;\n        this._material.subSurface.translucencyIntensity = value;\n    }\n    /**\n     * Gets the subsurface weight\n     * @returns The subsurface weight value\n     */\n    get subsurfaceWeight() {\n        return this._material.subSurface.isTranslucencyEnabled ? this._material.subSurface.translucencyIntensity : 0;\n    }\n    /**\n     * Sets the subsurface weight texture\n     */\n    set subsurfaceWeightTexture(value) {\n        this._material.subSurface.translucencyIntensityTexture = value;\n    }\n    /**\n     * Sets the subsurface color.\n     * @param value The subsurface tint color as a Color3\n     */\n    set subsurfaceColor(value) {\n        // PBRMaterial does not have a direct equivalent for subsurface color,\n        // We could set the base color to this value, wherever subsurfaceWeight > 0\n        // When scatterAnisotropy is 1, I believe we can approximate the subsurface effect quite well with\n        // Translucency and a diffusion distance\n        const absorptionCoeff = this.extinctionCoefficient;\n        const maxChannel = Math.max(absorptionCoeff.x, Math.max(absorptionCoeff.y, absorptionCoeff.z));\n        const attenuationDistance = maxChannel > 0 ? 1.0 / maxChannel : 1;\n        this._material.subSurface.diffusionDistance = new Color3(Math.exp(-absorptionCoeff.x * attenuationDistance), Math.exp(-absorptionCoeff.y * attenuationDistance), Math.exp(-absorptionCoeff.z * attenuationDistance));\n    }\n    /**\n     * Sets the subsurface color texture.\n     * @param value The subsurface tint texture or null\n     */\n    set subsurfaceColorTexture(value) {\n        // PBRMaterial does not have a direct equivalent for subsurface color texture,\n    }\n    /**\n     * Sets the surface tint of the material (when using subsurface scattering)\n     */\n    set subsurfaceConstantTint(value) {\n        this._material.subSurface.tintColor = value;\n    }\n    /**\n     * Gets the subsurface constant tint (when using subsurface scattering)\n     * @returns The subsurface constant tint as a Color3\n     */\n    get subsurfaceConstantTint() {\n        return this._material.subSurface.tintColor;\n    }\n    /**\n     * Sets the subsurface constant tint texture (when using subsurface scattering)\n     * @param value The subsurface constant tint texture or null\n     */\n    set subsurfaceConstantTintTexture(value) {\n        this._material.subSurface.translucencyColorTexture = value;\n    }\n    /**\n     * Gets the subsurface radius (used for subsurface scattering)\n     * subsurfaceRadiusScale * subsurfaceRadius gives the mean free path per color channel.\n     * @returns The subsurface radius as a Color3\n     */\n    get subsurfaceRadius() {\n        return 1.0;\n    }\n    /**\n     * Sets the subsurface radius (used for subsurface scattering)\n     * subsurfaceRadiusScale * subsurfaceRadius gives the mean free path per color channel.\n     * @param value The subsurface radius as a number\n     */\n    set subsurfaceRadius(value) {\n        //\n    }\n    /**\n     * Gets the subsurface radius scale (used for subsurface scattering)\n     * subsurfaceRadiusScale * subsurfaceRadius gives the mean free path per color channel.\n     * @returns The subsurface radius scale as a Color3\n     */\n    get subsurfaceRadiusScale() {\n        return this._material.subSurface.scatteringDiffusionProfile ?? Color3.White();\n    }\n    /**\n     * Sets the subsurface radius scale (used for subsurface scattering)\n     * subsurfaceRadiusScale * subsurfaceRadius gives the mean free path per color channel.\n     * @param value The subsurface radius scale as a Color3\n     */\n    set subsurfaceRadiusScale(value) {\n        this._material.subSurface.scatteringDiffusionProfile = value;\n    }\n    /**\n     * Sets the subsurface scattering anisotropy.\n     * Note: PBRMaterial does not have a direct equivalent, so this is a no-op.\n     * @param value The anisotropy intensity value (ignored for PBR)\n     */\n    set subsurfaceScatterAnisotropy(value) {\n        // No equivalent in PBRMaterial\n    }\n    // ========================================\n    // FUZZ LAYER (Sheen)\n    // ========================================\n    /**\n     * Configures sheen for PBR material.\n     * Enables sheen and sets up proper configuration.\n     */\n    configureFuzz() {\n        this._material.sheen.isEnabled = true;\n        this._material.sheen.useRoughnessFromMainTexture = false;\n        this._material.sheen.albedoScaling = true;\n    }\n    /**\n     * Sets the sheen weight (mapped to PBR sheen.intensity).\n     * Automatically enables sheen.\n     * @param value The sheen weight value\n     */\n    set fuzzWeight(value) {\n        this._material.sheen.isEnabled = true;\n        this._material.sheen.intensity = value;\n    }\n    /**\n     * Sets the fuzz weight texture.\n     * @param value The fuzz weight texture or null\n     */\n    set fuzzWeightTexture(value) {\n        // PBRMaterial sheen supports glTF-style sheen which doesn't\n        // use a separate texture for intensity. So we'll only set the\n        // weight texture if none is already assigned. If one's already\n        // assigned, we assume it contains the sheen color data.\n        if (!this._material.sheen.texture) {\n            this._material.sheen.texture = value;\n        }\n    }\n    /**\n     * Sets the sheen color (mapped to PBR sheen.color).\n     * Automatically enables sheen.\n     * @param value The sheen color as a Color3\n     */\n    set fuzzColor(value) {\n        this._material.sheen.isEnabled = true;\n        this._material.sheen.color = value;\n    }\n    /**\n     * Sets the sheen color texture (mapped to PBR sheen.texture).\n     * Automatically enables sheen.\n     * @param value The sheen color texture or null\n     */\n    set fuzzColorTexture(value) {\n        this._material.sheen.texture = value;\n    }\n    /**\n     * Sets the sheen roughness (mapped to PBR sheen.roughness).\n     * Automatically enables sheen.\n     * @param value The sheen roughness value (0-1)\n     */\n    set fuzzRoughness(value) {\n        this._material.sheen.isEnabled = true;\n        this._material.sheen.roughness = value;\n    }\n    /**\n     * Sets the sheen roughness texture (mapped to PBR sheen.textureRoughness).\n     * Automatically enables sheen.\n     * @param value The sheen roughness texture or null\n     */\n    set fuzzRoughnessTexture(value) {\n        this._material.sheen.isEnabled = true;\n        this._material.sheen.textureRoughness = value;\n    }\n    // ========================================\n    // ANISOTROPY\n    // ========================================\n    /**\n     * Sets the specular roughness anisotropy (mapped to PBR anisotropy.intensity).\n     * Automatically enables anisotropy.\n     * @param value The anisotropy intensity value\n     */\n    set specularRoughnessAnisotropy(value) {\n        this._material.anisotropy.isEnabled = true;\n        this._material.anisotropy.intensity = value;\n    }\n    /**\n     * Gets the specular roughness anisotropy.\n     * @returns The anisotropy intensity value\n     */\n    get specularRoughnessAnisotropy() {\n        return this._material.anisotropy.intensity;\n    }\n    /**\n     * Sets the anisotropy rotation (mapped to PBR anisotropy.angle).\n     * Automatically enables anisotropy.\n     * @param value The anisotropy rotation angle in radians\n     */\n    set geometryTangentAngle(value) {\n        this._material.anisotropy.isEnabled = true;\n        this._material.anisotropy.angle = value;\n    }\n    /**\n     * Sets the geometry tangent texture (mapped to PBR anisotropy.texture).\n     * Automatically enables anisotropy.\n     * @param value The anisotropy texture or null\n     */\n    set geometryTangentTexture(value) {\n        this._material.anisotropy.isEnabled = true;\n        this._material.anisotropy.texture = value;\n    }\n    /**\n     * Gets the geometry tangent texture.\n     * @returns The anisotropy texture or null\n     */\n    get geometryTangentTexture() {\n        return this._material.anisotropy.texture;\n    }\n    /**\n     * Configures glTF-style anisotropy for the material.\n     * Note: PBR materials don't need this configuration, so this is a no-op.\n     * @param useGltfStyle Whether to use glTF-style anisotropy (ignored for PBR)\n     */\n    configureGltfStyleAnisotropy(useGltfStyle = true) {\n        // PBR materials don't need this configuration\n    }\n    // ========================================\n    // THIN FILM IRIDESCENCE\n    // ========================================\n    /**\n     * Sets the iridescence weight (mapped to PBR iridescence.intensity).\n     * Automatically enables iridescence.\n     * @param value The iridescence intensity value\n     */\n    set thinFilmWeight(value) {\n        this._material.iridescence.isEnabled = value > 0;\n        this._material.iridescence.intensity = value;\n    }\n    /**\n     * Sets the iridescence IOR (mapped to PBR iridescence.indexOfRefraction).\n     * @param value The iridescence IOR value\n     */\n    set thinFilmIor(value) {\n        this._material.iridescence.indexOfRefraction = value;\n    }\n    /**\n     * Sets the iridescence thickness minimum (mapped to PBR iridescence.minimumThickness).\n     * @param value The minimum thickness value in nanometers\n     */\n    set thinFilmThicknessMinimum(value) {\n        this._material.iridescence.minimumThickness = value;\n    }\n    /**\n     * Sets the iridescence thickness maximum (mapped to PBR iridescence.maximumThickness).\n     * @param value The maximum thickness value in nanometers\n     */\n    set thinFilmThicknessMaximum(value) {\n        this._material.iridescence.maximumThickness = value;\n    }\n    /**\n     * Sets the thin film weight texture (mapped to PBR iridescence.texture).\n     * @param value The thin film weight texture or null\n     */\n    set thinFilmWeightTexture(value) {\n        this._material.iridescence.texture = value;\n    }\n    /**\n     * Sets the iridescence thickness texture (mapped to PBR iridescence.thicknessTexture).\n     * @param value The iridescence thickness texture or null\n     */\n    set thinFilmThicknessTexture(value) {\n        this._material.iridescence.thicknessTexture = value;\n    }\n    // ========================================\n    // UNLIT MATERIALS\n    // ========================================\n    /**\n     * Sets whether the material is unlit.\n     * @param value True to make the material unlit\n     */\n    set unlit(value) {\n        this._material.unlit = value;\n    }\n    // ========================================\n    // GEOMETRY PARAMETERS\n    // ========================================\n    /**\n     * Sets the geometry opacity (mapped to PBR alpha).\n     * @param value The opacity value (0-1)\n     */\n    set geometryOpacity(value) {\n        this._material.alpha = value;\n    }\n    /**\n     * Gets the geometry opacity.\n     * @returns The opacity value (0-1)\n     */\n    get geometryOpacity() {\n        return this._material.alpha;\n    }\n    /**\n     * Sets the geometry normal texture (mapped to PBR bumpTexture).\n     * Also forces irradiance computation in fragment shader for better lighting.\n     * @param value The normal texture or null\n     */\n    set geometryNormalTexture(value) {\n        this._material.bumpTexture = value;\n        this._material.forceIrradianceInFragment = true;\n    }\n    /**\n     * Gets the geometry normal texture.\n     * @returns The normal texture or null\n     */\n    get geometryNormalTexture() {\n        return this._material.bumpTexture;\n    }\n    /**\n     * Sets the normal map inversions for the material.\n     * @param invertX Whether to invert the normal map on the X axis\n     * @param invertY Whether to invert the normal map on the Y axis\n     */\n    setNormalMapInversions(invertX, invertY) {\n        this._material.invertNormalMapX = invertX;\n        this._material.invertNormalMapY = invertY;\n    }\n    /**\n     * Sets the geometry coat normal texture (mapped to PBR clearCoat.bumpTexture).\n     * Automatically enables clear coat.\n     * @param value The coat normal texture or null\n     */\n    set geometryCoatNormalTexture(value) {\n        this._material.clearCoat.isEnabled = true;\n        this._material.clearCoat.bumpTexture = value;\n    }\n    /**\n     * Gets the geometry coat normal texture.\n     * @returns The coat normal texture or null\n     */\n    get geometryCoatNormalTexture() {\n        return this._material.clearCoat.bumpTexture;\n    }\n    /**\n     * Sets the geometry coat normal texture scale.\n     * @param value The scale value for the coat normal texture\n     */\n    set geometryCoatNormalTextureScale(value) {\n        if (this._material.clearCoat.bumpTexture) {\n            this._material.clearCoat.bumpTexture.level = value;\n        }\n    }\n}\n//# sourceMappingURL=pbrMaterialLoadingAdapter.js.map"],"names":["PBRMaterialLoadingAdapter","constructor","material","this","_extinctionCoefficient","Vector3","Zero","_material","enableSpecularAntiAliasing","isUnlit","unlit","value","backFaceCulling","twoSidedLighting","alphaCutOff","useAlphaFromBaseColorTexture","useAlphaFromAlbedoTexture","transparencyAsAlphaCoverage","useRadianceOverAlpha","useSpecularOverAlpha","baseColor","albedoColor","baseColorTexture","albedoTexture","baseDiffuseRoughness","brdf","baseDiffuseModel","Constants","MATERIAL_DIFFUSE_MODEL_E_OREN_NAYAR","baseDiffuseRoughnessTexture","baseMetalness","metallic","baseMetalnessTexture","metallicTexture","useRoughnessFromMetallicTextureGreen","useRoughnessFromMetallicTextureAlpha","useMetallicFromMetallicTextureBlue","useMetallnessFromMetallicTextureBlue","enableSpecularEdgeColor","enableEdgeColor","dielectricSpecularModel","MATERIAL_DIELECTRIC_SPECULAR_MODEL_OPENPBR","conductorSpecularModel","MATERIAL_CONDUCTOR_SPECULAR_MODEL_OPENPBR","specularWeight","metallicF0Factor","specularWeightTexture","metallicReflectanceTexture","useOnlyMetallicFromMetallicReflectanceTexture","specularColor","metallicReflectanceColor","specularColorTexture","reflectanceTexture","specularRoughness","roughness","specularRoughnessTexture","specularIor","indexOfRefraction","emissionColor","emissiveColor","emissionLuminance","emissiveIntensity","emissionColorTexture","emissiveTexture","ambientOcclusionTexture","ambientTexture","useAmbientInGrayScale","ambientOcclusionTextureStrength","ambientTextureStrength","configureCoat","clearCoat","isEnabled","useRoughnessFromMainTexture","remapF0OnInterfaceChange","coatWeight","intensity","coatWeightTexture","texture","coatColor","isTintEnabled","Color3","White","tintColor","coatColorTexture","tintTexture","coatRoughness","coatRoughnessTexture","textureRoughness","coatIor","coatDarkening","coatDarkeningTexture","coatRoughnessAnisotropy","geometryCoatTangentAngle","geometryCoatTangentTexture","transmissionWeight","subSurface","isRefractionEnabled","refractionIntensity","transmissionWeightTexture","refractionIntensityTexture","useGltfStyleTextures","transmissionDepth","tintColorAtDistance","subsurfaceWeight","diffusionDistance","multiplyInPlace","transmissionColor","transmissionScatter","transmissionScatterAnisotropy","transmissionDispersionAbbeNumber","transmissionDispersionScale","isDispersionEnabled","dispersion","refractionBackgroundTexture","refractionTexture","configureTransmission","volumeIndexOfRefraction","useAlbedoToTintRefraction","minimumThickness","maximumThickness","volumeThicknessTexture","thicknessTexture","volumeThickness","useThicknessAsDepth","configureSubsurface","useAlbedoToTintTranslucency","extinctionCoefficient","isTranslucencyEnabled","translucencyIntensity","subsurfaceWeightTexture","translucencyIntensityTexture","subsurfaceColor","absorptionCoeff","maxChannel","Math","max","x","y","z","attenuationDistance","exp","subsurfaceColorTexture","subsurfaceConstantTint","subsurfaceConstantTintTexture","translucencyColorTexture","subsurfaceRadius","subsurfaceRadiusScale","scatteringDiffusionProfile","subsurfaceScatterAnisotropy","configureFuzz","sheen","albedoScaling","fuzzWeight","fuzzWeightTexture","fuzzColor","color","fuzzColorTexture","fuzzRoughness","fuzzRoughnessTexture","specularRoughnessAnisotropy","anisotropy","geometryTangentAngle","angle","geometryTangentTexture","configureGltfStyleAnisotropy","useGltfStyle","thinFilmWeight","iridescence","thinFilmIor","thinFilmThicknessMinimum","thinFilmThicknessMaximum","thinFilmWeightTexture","thinFilmThicknessTexture","geometryOpacity","alpha","geometryNormalTexture","bumpTexture","forceIrradianceInFragment","setNormalMapInversions","invertX","invertY","invertNormalMapX","invertNormalMapY","geometryCoatNormalTexture","geometryCoatNormalTextureScale","level"],"mappings":"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"}