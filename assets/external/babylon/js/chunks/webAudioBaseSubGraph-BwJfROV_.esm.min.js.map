{"version":3,"file":"webAudioBaseSubGraph-BwJfROV_.esm.min.js","sources":["../../../../../dev/core/dist/AudioV2/abstractAudio/subNodes/abstractAudioSubNode.js","../../../../../dev/core/dist/AudioV2/abstractAudio/subNodes/volumeAudioSubNode.js","../../../../../dev/core/dist/AudioV2/abstractAudio/subProperties/abstractAudioAnalyzer.js","../../../../../dev/core/dist/AudioV2/abstractAudio/subNodes/audioAnalyzerSubNode.js","../../../../../dev/core/dist/AudioV2/abstractAudio/subProperties/audioAnalyzer.js","../../../../../dev/core/dist/AudioV2/abstractAudio/abstractAudioOutNode.js","../../../../../dev/core/dist/AudioV2/abstractAudio/subNodes/abstractAudioSubGraph.js","../../../../../dev/core/dist/AudioV2/webAudio/subNodes/volumeWebAudioSubNode.js","../../../../../dev/core/dist/AudioV2/webAudio/subNodes/webAudioAnalyzerSubNode.js","../../../../../dev/core/dist/AudioV2/webAudio/subNodes/webAudioBaseSubGraph.js"],"sourcesContent":["import { AbstractNamedAudioNode } from \"../abstractAudioNode\";\n/** @internal */\nexport class _AbstractAudioSubNode extends AbstractNamedAudioNode {\n    /** @internal */\n    constructor(name, engine) {\n        super(name, engine, 3 /* AudioNodeType.HAS_INPUTS_AND_OUTPUTS */);\n    }\n    /** @internal */\n    connect(node) {\n        if (!this._connect(node)) {\n            throw new Error(\"Connect failed\");\n        }\n    }\n    /** @internal */\n    disconnect(node) {\n        if (!this._disconnect(node)) {\n            throw new Error(\"Disconnect failed\");\n        }\n    }\n    /** @internal */\n    disconnectAll() {\n        if (!this._downstreamNodes) {\n            throw new Error(\"Disconnect failed\");\n        }\n        const it = this._downstreamNodes.values();\n        for (let next = it.next(); !next.done; next = it.next()) {\n            if (!this._disconnect(next.value)) {\n                throw new Error(\"Disconnect failed\");\n            }\n        }\n    }\n}\n//# sourceMappingURL=abstractAudioSubNode.js.map","import { _AbstractAudioSubNode } from \"../subNodes/abstractAudioSubNode\";\n/** @internal */\nexport const _VolumeAudioDefaults = {\n    volume: 1,\n};\n/** @internal */\nexport class _VolumeAudioSubNode extends _AbstractAudioSubNode {\n    constructor(engine) {\n        super(\"Volume\" /* AudioSubNode.VOLUME */, engine);\n    }\n    /** @internal */\n    setOptions(options) {\n        this.setVolume(options.volume ?? _VolumeAudioDefaults.volume, { shape: \"none\" /* AudioParameterRampShape.None */ });\n    }\n}\n/** @internal */\nexport function _GetVolumeAudioSubNode(subGraph) {\n    return subGraph.getSubNode(\"Volume\" /* AudioSubNode.VOLUME */);\n}\n/** @internal */\nexport function _GetVolumeAudioProperty(subGraph, property) {\n    return _GetVolumeAudioSubNode(subGraph)?.[property] ?? _VolumeAudioDefaults[property];\n}\n//# sourceMappingURL=volumeAudioSubNode.js.map","export const _AudioAnalyzerDefaults = {\n    fftSize: 2048,\n    minDecibels: -100,\n    maxDecibels: -30,\n    smoothing: 0.8,\n};\n/**\n * @param options The audio analyzer options to check.\n * @returns `true` if audio analyzer options are defined, otherwise `false`.\n */\nexport function _HasAudioAnalyzerOptions(options) {\n    return (options.analyzerEnabled ||\n        options.analyzerFFTSize !== undefined ||\n        options.analyzerMinDecibels !== undefined ||\n        options.analyzerMaxDecibels !== undefined ||\n        options.analyzerSmoothing !== undefined);\n}\n/**\n * An AudioAnalyzer converts time-domain audio data into the frequency-domain.\n */\nexport class AbstractAudioAnalyzer {\n    /**\n     * The number of data values that will be returned when calling getByteFrequencyData() or getFloatFrequencyData(). This is always half the `fftSize`.\n     */\n    get frequencyBinCount() {\n        return this.fftSize / 2;\n    }\n}\n//# sourceMappingURL=abstractAudioAnalyzer.js.map","import { _AudioAnalyzerDefaults } from \"../subProperties/abstractAudioAnalyzer\";\nimport { _AbstractAudioSubNode } from \"./abstractAudioSubNode\";\n/** @internal */\nexport class _AudioAnalyzerSubNode extends _AbstractAudioSubNode {\n    constructor(engine) {\n        super(\"Analyzer\" /* AudioSubNode.ANALYZER */, engine);\n    }\n    /** @internal */\n    setOptions(options) {\n        this.fftSize = options.analyzerFFTSize ?? _AudioAnalyzerDefaults.fftSize;\n        this.minDecibels = options.analyzerMinDecibels ?? _AudioAnalyzerDefaults.minDecibels;\n        this.maxDecibels = options.analyzerMaxDecibels ?? _AudioAnalyzerDefaults.maxDecibels;\n        this.smoothing = options.analyzerSmoothing ?? _AudioAnalyzerDefaults.smoothing;\n    }\n}\n/** @internal */\nexport function _GetAudioAnalyzerSubNode(subGraph) {\n    return subGraph.getSubNode(\"Analyzer\" /* AudioSubNode.ANALYZER */);\n}\n/** @internal */\nexport function _SetAudioAnalyzerProperty(subGraph, property, value) {\n    subGraph.callOnSubNode(\"Analyzer\" /* AudioSubNode.ANALYZER */, (node) => {\n        node[property] = value;\n    });\n}\n//# sourceMappingURL=audioAnalyzerSubNode.js.map","import { Logger } from \"../../../Misc/logger\";\nimport { _AudioAnalyzerDefaults, AbstractAudioAnalyzer } from \"../../abstractAudio/subProperties/abstractAudioAnalyzer\";\nimport { _GetAudioAnalyzerSubNode, _SetAudioAnalyzerProperty } from \"../subNodes/audioAnalyzerSubNode\";\nlet EmptyByteFrequencyData = null;\nlet EmptyFloatFrequencyData = null;\n/** @internal */\nexport function _GetEmptyByteFrequencyData() {\n    if (!EmptyByteFrequencyData) {\n        EmptyByteFrequencyData = new Uint8Array();\n    }\n    return EmptyByteFrequencyData;\n}\n/** @internal */\nexport function _GetEmptyFloatFrequencyData() {\n    if (!EmptyFloatFrequencyData) {\n        EmptyFloatFrequencyData = new Float32Array();\n    }\n    return EmptyFloatFrequencyData;\n}\n/** @internal */\nexport class _AudioAnalyzer extends AbstractAudioAnalyzer {\n    /** @internal */\n    constructor(subGraph) {\n        super();\n        this._fftSize = _AudioAnalyzerDefaults.fftSize;\n        this._maxDecibels = _AudioAnalyzerDefaults.maxDecibels;\n        this._minDecibels = _AudioAnalyzerDefaults.minDecibels;\n        this._smoothing = _AudioAnalyzerDefaults.smoothing;\n        this._subGraph = subGraph;\n    }\n    /** @internal */\n    get fftSize() {\n        return this._fftSize;\n    }\n    set fftSize(value) {\n        this._fftSize = value;\n        _SetAudioAnalyzerProperty(this._subGraph, \"fftSize\", value);\n    }\n    /** @internal */\n    get isEnabled() {\n        return _GetAudioAnalyzerSubNode(this._subGraph) !== null;\n    }\n    /** @internal */\n    get minDecibels() {\n        return this._minDecibels;\n    }\n    set minDecibels(value) {\n        this._minDecibels = value;\n        _SetAudioAnalyzerProperty(this._subGraph, \"minDecibels\", value);\n    }\n    /** @internal */\n    get maxDecibels() {\n        return this._maxDecibels;\n    }\n    set maxDecibels(value) {\n        this._maxDecibels = value;\n        _SetAudioAnalyzerProperty(this._subGraph, \"maxDecibels\", value);\n    }\n    /** @internal */\n    get smoothing() {\n        return this._smoothing;\n    }\n    set smoothing(value) {\n        this._smoothing = value;\n        _SetAudioAnalyzerProperty(this._subGraph, \"smoothing\", value);\n    }\n    /** @internal */\n    dispose() {\n        const subNode = _GetAudioAnalyzerSubNode(this._subGraph);\n        if (subNode) {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this._subGraph.removeSubNodeAsync(subNode);\n            subNode.dispose();\n        }\n    }\n    /** @internal */\n    async enableAsync() {\n        const subNode = _GetAudioAnalyzerSubNode(this._subGraph);\n        if (!subNode) {\n            await this._subGraph.createAndAddSubNodeAsync(\"Analyzer\" /* AudioSubNode.ANALYZER */);\n        }\n    }\n    /** @internal */\n    getByteFrequencyData() {\n        const subNode = _GetAudioAnalyzerSubNode(this._subGraph);\n        if (!subNode) {\n            Logger.Warn(\"AudioAnalyzer not enabled\");\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.enableAsync();\n            return _GetEmptyByteFrequencyData();\n        }\n        return subNode.getByteFrequencyData();\n    }\n    /** @internal */\n    getFloatFrequencyData() {\n        const subNode = _GetAudioAnalyzerSubNode(this._subGraph);\n        if (!subNode) {\n            Logger.Warn(\"AudioAnalyzer not enabled\");\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.enableAsync();\n            return _GetEmptyFloatFrequencyData();\n        }\n        return subNode.getFloatFrequencyData();\n    }\n}\n//# sourceMappingURL=audioAnalyzer.js.map","import { AbstractNamedAudioNode } from \"./abstractAudioNode\";\nimport { _GetVolumeAudioProperty, _GetVolumeAudioSubNode } from \"./subNodes/volumeAudioSubNode\";\nimport { _AudioAnalyzer } from \"./subProperties/audioAnalyzer\";\n/**\n * Abstract class representing and audio output node with an analyzer and volume control.\n */\nexport class AbstractAudioOutNode extends AbstractNamedAudioNode {\n    constructor(name, engine, nodeType) {\n        super(name, engine, nodeType);\n        this._analyzer = null;\n    }\n    /**\n     * The audio analyzer features.\n     */\n    get analyzer() {\n        return this._analyzer ?? (this._analyzer = new _AudioAnalyzer(this._subGraph));\n    }\n    /**\n     * The audio output volume.\n     */\n    get volume() {\n        return _GetVolumeAudioProperty(this._subGraph, \"volume\");\n    }\n    set volume(value) {\n        // The volume subnode is created on initialization and should always exist.\n        const node = _GetVolumeAudioSubNode(this._subGraph);\n        if (!node) {\n            throw new Error(\"No volume subnode\");\n        }\n        node.volume = value;\n    }\n    /**\n     * Releases associated resources.\n     */\n    dispose() {\n        super.dispose();\n        this._analyzer?.dispose();\n        this._analyzer = null;\n        this._subGraph.dispose();\n    }\n    /**\n     * Sets the audio output volume with optional ramping.\n     * If the duration is 0 then the volume is set immediately, otherwise it is ramped to the new value over the given duration using the given shape.\n     * If a ramp is already in progress then the volume is not set and an error is thrown.\n     * @param value The value to set the volume to.\n     * @param options The options to use for ramping the volume change.\n     */\n    setVolume(value, options = null) {\n        const node = _GetVolumeAudioSubNode(this._subGraph);\n        if (!node) {\n            throw new Error(\"No volume subnode\");\n        }\n        node.setVolume(value, options);\n    }\n}\n//# sourceMappingURL=abstractAudioOutNode.js.map","/**\n * Adds common sub graph functionality to an audio node.\n *\n * Audio nodes such as static sounds, streaming sounds, and buses can use audio sub graphs to process audio internally\n * before sending it to connected downstream audio nodes. This is useful for applying effects, spatial audio, and other\n * audio processing tasks common to multiple audio node classes.\n *\n * A key feature of audio sub graphs is their audio sub nodes are created asynchronously on demand so the minimum set\n * of sub nodes are used at all times to save memory and CPU resources. The tradeoff is a small delay when first\n * setting a property backed by a sub node. This delay is avoided by using the appropriate options to initialize the\n * sub node on creation, e.g. `spatialEnabled` and `stereoEnabled`, or by setting any creation option backed by the\n * sub node, e.g. `spatialPosition` and `stereoPan`.\n *\n * @internal\n */\nexport class _AbstractAudioSubGraph {\n    constructor() {\n        this._createSubNodePromises = {};\n        this._isDisposed = false;\n        this._subNodes = {};\n        this._onSubNodeDisposed = (node) => {\n            const subNode = node;\n            delete this._subNodes[subNode.name];\n            this._onSubNodesChanged();\n        };\n    }\n    /**\n     * Executes the given callback with the named sub node, creating the sub node if needed.\n     *\n     * @param name The name of the sub node\n     * @param callback The function to call with the named sub node\n     *\n     * @internal\n     */\n    callOnSubNode(name, callback) {\n        const node = this.getSubNode(name);\n        if (node) {\n            callback(node);\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises, github/no-then\n        this._createSubNodePromisesResolvedAsync().then(() => {\n            const node = this.getSubNode(name);\n            if (node) {\n                callback(node);\n                return;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises, github/no-then\n            this.createAndAddSubNodeAsync(name).then((node) => {\n                callback(node);\n            });\n        });\n    }\n    /**\n     * Creates the named subnode and adds it to the sub graph.\n     *\n     * @param name The name of the sub node.\n     * @returns A promise that resolves to the created sub node.\n     *\n     * @internal\n     */\n    // eslint-disable-next-line @typescript-eslint/promise-function-async, no-restricted-syntax\n    createAndAddSubNodeAsync(name) {\n        // eslint-disable-next-line github/no-then\n        this._createSubNodePromises[name] ||= this._createSubNode(name).then((node) => {\n            this._addSubNode(node);\n            return node;\n        });\n        return this._createSubNodePromises[name];\n    }\n    /**\n     * Releases associated resources.\n     *\n     * @internal\n     */\n    dispose() {\n        this._isDisposed = true;\n        const subNodes = Object.values(this._subNodes);\n        for (const subNode of subNodes) {\n            subNode.dispose();\n        }\n        this._subNodes = {};\n        this._createSubNodePromises = {};\n    }\n    /**\n     * Gets a previously created sub node.\n     *\n     * @param name - The name of the sub node\n     * @returns The named sub node, or `null` if it has not been created, yet\n     *\n     * @internal\n     * */\n    getSubNode(name) {\n        return this._subNodes[name] ?? null;\n    }\n    /**\n     * Removes a sub node from the sub graph.\n     *\n     * @param subNode - The sub node to remove\n     * @returns A promise that resolves when the sub node is removed\n     *\n     * @internal\n     */\n    async removeSubNodeAsync(subNode) {\n        if (!subNode) {\n            return;\n        }\n        await this._createSubNodePromisesResolvedAsync();\n        const name = subNode.name;\n        if (this._subNodes[name]) {\n            delete this._subNodes[name];\n        }\n        delete this._createSubNodePromises[name];\n        this._onSubNodesChanged();\n    }\n    async _createSubNodePromisesResolvedAsync() {\n        return await Promise.all(Object.values(this._createSubNodePromises));\n    }\n    _addSubNode(node) {\n        if (this._isDisposed) {\n            node.dispose();\n            return;\n        }\n        this._subNodes[node.name] = node;\n        node.onDisposeObservable.addOnce(this._onSubNodeDisposed);\n        this._onSubNodesChanged();\n    }\n}\n//# sourceMappingURL=abstractAudioSubGraph.js.map","import { _VolumeAudioSubNode } from \"../../abstractAudio/subNodes/volumeAudioSubNode\";\nimport { _WebAudioParameterComponent } from \"../components/webAudioParameterComponent\";\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function _CreateVolumeAudioSubNodeAsync(engine) {\n    return new _VolumeWebAudioSubNode(engine);\n}\n/** @internal */\nexport class _VolumeWebAudioSubNode extends _VolumeAudioSubNode {\n    /** @internal */\n    constructor(engine) {\n        super(engine);\n        const gainNode = (this.node = new GainNode(engine._audioContext));\n        this._volume = new _WebAudioParameterComponent(engine, gainNode.gain);\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._volume.dispose();\n    }\n    /** @internal */\n    get volume() {\n        return this._volume.value;\n    }\n    /** @internal */\n    set volume(value) {\n        this.setVolume(value);\n    }\n    /** @internal */\n    get _inNode() {\n        return this.node;\n    }\n    /** @internal */\n    get _outNode() {\n        return this.node;\n    }\n    /** @internal */\n    setVolume(value, options = null) {\n        this._volume.setTargetValue(value, options);\n    }\n    _connect(node) {\n        const connected = super._connect(node);\n        if (!connected) {\n            return false;\n        }\n        // If the wrapped node is not available now, it will be connected later by the subgraph.\n        if (node._inNode) {\n            this.node.connect(node._inNode);\n        }\n        return true;\n    }\n    _disconnect(node) {\n        const disconnected = super._disconnect(node);\n        if (!disconnected) {\n            return false;\n        }\n        if (node._inNode) {\n            this.node.disconnect(node._inNode);\n        }\n        return true;\n    }\n    /** @internal */\n    getClassName() {\n        return \"_VolumeWebAudioSubNode\";\n    }\n}\n//# sourceMappingURL=volumeWebAudioSubNode.js.map","import { _AudioAnalyzerSubNode } from \"../../abstractAudio/subNodes/audioAnalyzerSubNode\";\nimport { _GetEmptyByteFrequencyData, _GetEmptyFloatFrequencyData } from \"../../abstractAudio/subProperties/audioAnalyzer\";\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function _CreateAudioAnalyzerSubNodeAsync(engine) {\n    return new _WebAudioAnalyzerSubNode(engine);\n}\n/** @internal */\nexport class _WebAudioAnalyzerSubNode extends _AudioAnalyzerSubNode {\n    /** @internal */\n    constructor(engine) {\n        super(engine);\n        this._byteFrequencyData = null;\n        this._floatFrequencyData = null;\n        this._analyzerNode = new AnalyserNode(engine._audioContext);\n    }\n    /** @internal */\n    get fftSize() {\n        return this._analyzerNode.fftSize;\n    }\n    set fftSize(value) {\n        if (value === this._analyzerNode.fftSize) {\n            return;\n        }\n        this._analyzerNode.fftSize = value;\n        this._clearArrays();\n    }\n    /** @internal */\n    get _inNode() {\n        return this._analyzerNode;\n    }\n    /** @internal */\n    get minDecibels() {\n        return this._analyzerNode.minDecibels;\n    }\n    set minDecibels(value) {\n        this._analyzerNode.minDecibels = value;\n    }\n    /** @internal */\n    get maxDecibels() {\n        return this._analyzerNode.maxDecibels;\n    }\n    set maxDecibels(value) {\n        this._analyzerNode.maxDecibels = value;\n    }\n    /** @internal */\n    get smoothing() {\n        return this._analyzerNode.smoothingTimeConstant;\n    }\n    set smoothing(value) {\n        this._analyzerNode.smoothingTimeConstant = value;\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._clearArrays();\n        this._byteFrequencyData = null;\n        this._floatFrequencyData = null;\n        this._analyzerNode.disconnect();\n    }\n    /** @internal */\n    getClassName() {\n        return \"_WebAudioAnalyzerSubNode\";\n    }\n    /** @internal */\n    getByteFrequencyData() {\n        if (!this._byteFrequencyData || this._byteFrequencyData.length === 0) {\n            this._byteFrequencyData = new Uint8Array(this._analyzerNode.frequencyBinCount);\n        }\n        this._analyzerNode.getByteFrequencyData(this._byteFrequencyData);\n        return this._byteFrequencyData;\n    }\n    /** @internal */\n    getFloatFrequencyData() {\n        if (!this._floatFrequencyData || this._floatFrequencyData.length === 0) {\n            this._floatFrequencyData = new Float32Array(this._analyzerNode.frequencyBinCount);\n        }\n        this._analyzerNode.getFloatFrequencyData(this._floatFrequencyData);\n        return this._floatFrequencyData;\n    }\n    _clearArrays() {\n        this._byteFrequencyData?.set(_GetEmptyByteFrequencyData());\n        this._floatFrequencyData?.set(_GetEmptyFloatFrequencyData());\n    }\n}\n//# sourceMappingURL=webAudioAnalyzerSubNode.js.map","import { _AbstractAudioSubGraph } from \"../../abstractAudio/subNodes/abstractAudioSubGraph\";\nimport { _GetAudioAnalyzerSubNode } from \"../../abstractAudio/subNodes/audioAnalyzerSubNode\";\nimport { _GetVolumeAudioSubNode } from \"../../abstractAudio/subNodes/volumeAudioSubNode\";\nimport { _HasAudioAnalyzerOptions } from \"../../abstractAudio/subProperties/abstractAudioAnalyzer\";\nimport { _CreateVolumeAudioSubNodeAsync } from \"./volumeWebAudioSubNode\";\nimport { _CreateAudioAnalyzerSubNodeAsync } from \"./webAudioAnalyzerSubNode\";\n/** @internal */\nexport class _WebAudioBaseSubGraph extends _AbstractAudioSubGraph {\n    /** @internal */\n    constructor(owner) {\n        super();\n        this._outputNode = null;\n        this._owner = owner;\n    }\n    /** @internal */\n    async initAsync(options) {\n        const hasAnalyzerOptions = _HasAudioAnalyzerOptions(options);\n        if (hasAnalyzerOptions) {\n            await this.createAndAddSubNodeAsync(\"Analyzer\" /* AudioSubNode.ANALYZER */);\n        }\n        await this.createAndAddSubNodeAsync(\"Volume\" /* AudioSubNode.VOLUME */);\n        await this._createSubNodePromisesResolvedAsync();\n        if (hasAnalyzerOptions) {\n            const analyzerNode = _GetAudioAnalyzerSubNode(this);\n            if (!analyzerNode) {\n                throw new Error(\"No analyzer subnode.\");\n            }\n            analyzerNode.setOptions(options);\n        }\n        const volumeNode = _GetVolumeAudioSubNode(this);\n        if (!volumeNode) {\n            throw new Error(\"No volume subnode.\");\n        }\n        volumeNode.setOptions(options);\n        if (volumeNode.getClassName() !== \"_VolumeWebAudioSubNode\") {\n            throw new Error(\"Not a WebAudio subnode.\");\n        }\n        this._outputNode = volumeNode.node;\n        // Connect the new wrapped WebAudio node to the wrapped downstream WebAudio nodes.\n        // The wrapper nodes are unaware of this change.\n        if (this._outputNode && this._downstreamNodes) {\n            const it = this._downstreamNodes.values();\n            for (let next = it.next(); !next.done; next = it.next()) {\n                const inNode = next.value._inNode;\n                if (inNode) {\n                    this._outputNode.connect(inNode);\n                }\n            }\n        }\n    }\n    /** @internal */\n    get _inNode() {\n        return this._outputNode;\n    }\n    /** @internal */\n    get _outNode() {\n        return this._outputNode;\n    }\n    // Function is async, but throws synchronously. Avoiding breaking changes.\n    // eslint-disable-next-line @typescript-eslint/promise-function-async\n    _createSubNode(name) {\n        switch (name) {\n            case \"Analyzer\" /* AudioSubNode.ANALYZER */:\n                return _CreateAudioAnalyzerSubNodeAsync(this._owner.engine);\n            case \"Volume\" /* AudioSubNode.VOLUME */:\n                return _CreateVolumeAudioSubNodeAsync(this._owner.engine);\n            default:\n                throw new Error(`Unknown subnode name: ${name}`);\n        }\n    }\n    _onSubNodesChanged() {\n        const analyzerNode = _GetAudioAnalyzerSubNode(this);\n        const volumeNode = _GetVolumeAudioSubNode(this);\n        if (analyzerNode && volumeNode) {\n            volumeNode.connect(analyzerNode);\n        }\n    }\n}\n//# sourceMappingURL=webAudioBaseSubGraph.js.map"],"names":["_AbstractAudioSubNode","AbstractNamedAudioNode","constructor","name","engine","super","connect","node","this","_connect","Error","disconnect","_disconnect","disconnectAll","_downstreamNodes","it","values","next","done","value","_VolumeAudioDefaults","volume","_VolumeAudioSubNode","setOptions","options","setVolume","shape","_GetVolumeAudioSubNode","subGraph","getSubNode","_AudioAnalyzerDefaults","AbstractAudioAnalyzer","frequencyBinCount","fftSize","_AudioAnalyzerSubNode","analyzerFFTSize","minDecibels","analyzerMinDecibels","maxDecibels","analyzerMaxDecibels","smoothing","analyzerSmoothing","_GetAudioAnalyzerSubNode","_SetAudioAnalyzerProperty","property","callOnSubNode","EmptyByteFrequencyData","EmptyFloatFrequencyData","_GetEmptyByteFrequencyData","Uint8Array","_GetEmptyFloatFrequencyData","Float32Array","_AudioAnalyzer","_fftSize","_maxDecibels","_minDecibels","_smoothing","_subGraph","isEnabled","dispose","subNode","removeSubNodeAsync","enableAsync","createAndAddSubNodeAsync","getByteFrequencyData","Logger","Warn","getFloatFrequencyData","AbstractAudioOutNode","nodeType","_analyzer","analyzer","_AbstractAudioSubGraph","_createSubNodePromises","_isDisposed","_subNodes","_onSubNodeDisposed","_onSubNodesChanged","callback","_createSubNodePromisesResolvedAsync","then","_createSubNode","_addSubNode","subNodes","Object","Promise","all","onDisposeObservable","addOnce","_VolumeWebAudioSubNode","gainNode","GainNode","_audioContext","_volume","_WebAudioParameterComponent","gain","_inNode","_outNode","setTargetValue","getClassName","_WebAudioAnalyzerSubNode","_byteFrequencyData","_floatFrequencyData","_analyzerNode","AnalyserNode","_clearArrays","smoothingTimeConstant","length","set","_WebAudioBaseSubGraph","owner","_outputNode","_owner","initAsync","hasAnalyzerOptions","analyzerEnabled","undefined","_HasAudioAnalyzerOptions","analyzerNode","volumeNode","inNode","async","_CreateAudioAnalyzerSubNodeAsync","_CreateVolumeAudioSubNodeAsync"],"mappings":"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"}