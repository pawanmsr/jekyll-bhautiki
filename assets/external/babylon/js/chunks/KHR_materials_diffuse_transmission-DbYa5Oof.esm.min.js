import{GLTFLoader as s}from"./glTFLoader-Cy3hFpAv.esm.min.js";import{b1 as e,bS as r,bR as n}from"./index-C7lpuH7l.esm.min.js";import"./bone-C8BOn9ne.esm.min.js";import"./skeleton-CpeT1KDV.esm.min.js";import"./rawTexture-GcKYJ37d.esm.min.js";import"./assetContainer-BpinJ-Pb.esm.min.js";import"./objectModelMapping-EW6prSP3.esm.min.js";const i="KHR_materials_diffuse_transmission";class o{constructor(s){this.name=i,this.order=174,this._loader=s,this.enabled=this._loader.isExtensionUsed(i),this.enabled&&(s.parent.transparencyAsCoverage=!0)}dispose(){this._loader=null}loadMaterialPropertiesAsync(e,r,n){return s.LoadExtensionAsync(e,r,this.name,(async(s,i)=>{const o=new Array;return o.push(this._loader.loadMaterialPropertiesAsync(e,r,n)),o.push(this._loadTranslucentPropertiesAsync(s,r,n,i)),await Promise.all(o).then((()=>{}))}))}_loadTranslucentPropertiesAsync(s,r,n,i){const o=this._loader._getOrCreateMaterialAdapter(n);o.configureSubsurface(),o.subsurfaceWeight=i.diffuseTransmissionFactor??0,o.subsurfaceConstantTint=void 0!==i.diffuseTransmissionColorFactor?e.FromArray(i.diffuseTransmissionColorFactor):e.White();const t=new Array;return i.diffuseTransmissionTexture&&(i.diffuseTransmissionTexture.nonColorData=!0,t.push(this._loader.loadTextureInfoAsync(`${s}/diffuseTransmissionTexture`,i.diffuseTransmissionTexture).then((s=>{s.name=`${n.name} (Diffuse Transmission)`,o.subsurfaceWeightTexture=s})))),i.diffuseTransmissionColorTexture&&t.push(this._loader.loadTextureInfoAsync(`${s}/diffuseTransmissionColorTexture`,i.diffuseTransmissionColorTexture).then((s=>{s.name=`${n.name} (Diffuse Transmission Color)`,o.subsurfaceConstantTintTexture=s}))),Promise.all(t).then((()=>{}))}}r(i),n(i,!0,(s=>new o(s)));export{o as KHR_materials_diffuse_transmission};
//# sourceMappingURL=KHR_materials_diffuse_transmission-DbYa5Oof.esm.min.js.map
