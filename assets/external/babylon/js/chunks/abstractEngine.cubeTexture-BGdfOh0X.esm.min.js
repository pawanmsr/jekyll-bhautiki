import{af as e,aQ as t,aR as a,m as n,aS as o,aT as s,L as l}from"./index-C7lpuH7l.esm.min.js";e.prototype._partialLoadFile=function(e,t,a,n,o=null){this._loadFile(e,(e=>{a[t]=e,a._internalCount++,6===a._internalCount&&n(a)}),void 0,void 0,!0,((e,t)=>{o&&e&&o(e.status+" "+e.statusText,t)}))},e.prototype._cascadeLoadFiles=function(e,t,a,n=null){const o=[];o._internalCount=0;for(let e=0;e<6;e++)this._partialLoadFile(a[e],e,o,t,n)},e.prototype._cascadeLoadImgs=function(e,t,a,n,o=null,s){const l=[];l._internalCount=0;for(let i=0;i<6;i++)this._partialLoadImg(n[i],i,l,e,t,a,o,s)},e.prototype._partialLoadImg=function(e,n,o,s,l,i,r=null,u){const d=t();a(e,(e=>{o[n]=e,o._internalCount++,s&&s.removePendingData(d),6===o._internalCount&&i&&i(l,o)}),((e,t)=>{s&&s.removePendingData(d),r&&r(e,t)}),s?s.offlineProvider:null,u),s&&s.addPendingData(d)},e.prototype.createCubeTextureBase=function(e,t,a,i,r=null,u=null,d,c=null,f=!1,p=0,_=0,h=null,m=null,C=null,g=!1,b=null){const x=h||new n(this,7);x.isCube=!0,x.url=e,x.generateMipMaps=!i,x._lodGenerationScale=p,x._lodGenerationOffset=_,x._useSRGBBuffer=!!g&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!i),x!==h&&(x.label=e.substring(0,60)),this._doNotHandleContextLost||(x._extension=c,x._files=a,x._buffer=b);const L=e;this._transformTextureUrl&&!h&&(e=this._transformTextureUrl(e));const v=c??o(e),T=s(v),y=(e,t)=>{x.dispose(),u?u(e,t):e&&l.Warn(e)},w=(n,o)=>{e===L?n&&y(n.status+" "+n.statusText,o):(l.Warn(`Failed to load ${e}, falling back to the ${L}`),this.createCubeTextureBase(L,t,a,!!i,r,y,d,c,f,p,_,x,m,C,g,b))};if(T)T.then((n=>{const o=e=>{m&&m(x,e),n.loadCubeData(e,x,f,r,((e,t)=>{y(e,t)}))};b?o(b):a&&6===a.length?n.supportCascades?this._cascadeLoadFiles(t,(e=>o(e.map((e=>new Uint8Array(e))))),a,y):y("Textures type does not support cascades."):this._loadFile(e,(e=>o(new Uint8Array(e))),void 0,t?t.offlineProvider||null:void 0,!0,w)}));else{if(!a||0===a.length)throw new Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(t,x,((e,t)=>{C&&C(e,t)}),a,y)}return this._internalTexturesCache.push(x),x};
//# sourceMappingURL=abstractEngine.cubeTexture-BGdfOh0X.esm.min.js.map
