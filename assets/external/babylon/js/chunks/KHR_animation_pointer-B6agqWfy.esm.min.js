import{aJ as e,b1 as t,L as s,bS as n,bR as a}from"./index-C7lpuH7l.esm.min.js";import{S as r,a as i}from"./objectModelMapping-EW6prSP3.esm.min.js";import{AnimationPropertyInfo as o}from"./glTFLoaderAnimation-BRV_2l97.esm.min.js";function l(e,s,n,a){return t.FromArray(s,n).scale(a)}function _(e,t,s,n){return t[s]*n}function m(e,t,s,n){return-t[s]*n}function c(e,t,s,n){return t[s+1]*n}function u(e,t,s,n){return t[s]*n*2}function x(t){return{scale:[new f(e.ANIMATIONTYPE_FLOAT,`${t}.uScale`,_,(()=>2)),new f(e.ANIMATIONTYPE_FLOAT,`${t}.vScale`,c,(()=>2))],offset:[new f(e.ANIMATIONTYPE_FLOAT,`${t}.uOffset`,_,(()=>2)),new f(e.ANIMATIONTYPE_FLOAT,`${t}.vOffset`,c,(()=>2))],rotation:[new f(e.ANIMATIONTYPE_FLOAT,`${t}.wAng`,m,(()=>1))]}}class T extends o{buildAnimations(e,t,s,n){return[{babylonAnimatable:e._babylonCamera,babylonAnimation:this._buildAnimation(t,s,n)}]}}class f extends o{buildAnimations(e,t,s,n){const a=[];for(const r in e._data)a.push({babylonAnimatable:e._data[r].babylonMaterial,babylonAnimation:this._buildAnimation(t,s,n)});return a}}class A extends o{buildAnimations(e,t,s,n){return[{babylonAnimatable:e._babylonLight,babylonAnimation:this._buildAnimation(t,s,n)}]}}r("/cameras/{}/orthographic/xmag",[new T(e.ANIMATIONTYPE_FLOAT,"orthoLeft",m,(()=>1)),new T(e.ANIMATIONTYPE_FLOAT,"orthoRight",c,(()=>1))]),r("/cameras/{}/orthographic/ymag",[new T(e.ANIMATIONTYPE_FLOAT,"orthoBottom",m,(()=>1)),new T(e.ANIMATIONTYPE_FLOAT,"orthoTop",c,(()=>1))]),r("/cameras/{}/orthographic/zfar",[new T(e.ANIMATIONTYPE_FLOAT,"maxZ",_,(()=>1))]),r("/cameras/{}/orthographic/znear",[new T(e.ANIMATIONTYPE_FLOAT,"minZ",_,(()=>1))]),r("/cameras/{}/perspective/yfov",[new T(e.ANIMATIONTYPE_FLOAT,"fov",_,(()=>1))]),r("/cameras/{}/perspective/zfar",[new T(e.ANIMATIONTYPE_FLOAT,"maxZ",_,(()=>1))]),r("/cameras/{}/perspective/znear",[new T(e.ANIMATIONTYPE_FLOAT,"minZ",_,(()=>1))]),r("/materials/{}/pbrMetallicRoughness/baseColorFactor",[new f(e.ANIMATIONTYPE_COLOR3,"albedoColor",l,(()=>4)),new f(e.ANIMATIONTYPE_FLOAT,"alpha",(function(e,t,s,n){return t[s+3]*n}),(()=>4))]),r("/materials/{}/pbrMetallicRoughness/metallicFactor",[new f(e.ANIMATIONTYPE_FLOAT,"metallic",_,(()=>1))]),r("/materials/{}/pbrMetallicRoughness/metallicFactor",[new f(e.ANIMATIONTYPE_FLOAT,"roughness",_,(()=>1))]);const R=x("albedoTexture");r("/materials/{}/pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/scale",R.scale),r("/materials/{}/pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/offset",R.offset),r("/materials/{}/pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/rotation",R.rotation);const h=x("metallicTexture");r("//materials/{}/pbrMetallicRoughness/metallicRoughnessTexture/scale",h.scale),r("//materials/{}/pbrMetallicRoughness/metallicRoughnessTexture/offset",h.offset),r("//materials/{}/pbrMetallicRoughness/metallicRoughnessTexture/rotation",h.rotation),r("/materials/{}/emissiveFactor",[new f(e.ANIMATIONTYPE_COLOR3,"emissiveColor",l,(()=>3))]);const O=x("bumpTexture");r("/materials/{}/normalTexture/scale",[new f(e.ANIMATIONTYPE_FLOAT,"bumpTexture.level",_,(()=>1))]),r("/materials/{}/normalTexture/extensions/KHR_texture_transform/scale",O.scale),r("/materials/{}/normalTexture/extensions/KHR_texture_transform/offset",O.offset),r("/materials/{}/normalTexture/extensions/KHR_texture_transform/rotation",O.rotation),r("/materials/{}/occlusionTexture/strength",[new f(e.ANIMATIONTYPE_FLOAT,"ambientTextureStrength",_,(()=>1))]);const H=x("ambientTexture");r("/materials/{}/occlusionTexture/extensions/KHR_texture_transform/scale",H.scale),r("/materials/{}/occlusionTexture/extensions/KHR_texture_transform/offset",H.offset),r("/materials/{}/occlusionTexture/extensions/KHR_texture_transform/rotation",H.rotation);const K=x("emissiveTexture");r("/materials/{}/emissiveTexture/extensions/KHR_texture_transform/scale",K.scale),r("/materials/{}/emissiveTexture/extensions/KHR_texture_transform/offset",K.offset),r("/materials/{}/emissiveTexture/extensions/KHR_texture_transform/rotation",K.rotation),r("/materials/{}/extensions/KHR_materials_anisotropy/anisotropyStrength",[new f(e.ANIMATIONTYPE_FLOAT,"anisotropy.intensity",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_anisotropy/anisotropyRotation",[new f(e.ANIMATIONTYPE_FLOAT,"anisotropy.angle",_,(()=>1))]);const I=x("anisotropy.texture");r("/materials/{}/extensions/KHR_materials_anisotropy/anisotropyTexture/extensions/KHR_texture_transform/scale",I.scale),r("/materials/{}/extensions/KHR_materials_anisotropy/anisotropyTexture/extensions/KHR_texture_transform/offset",I.offset),r("/materials/{}/extensions/KHR_materials_anisotropy/anisotropyTexture/extensions/KHR_texture_transform/rotation",I.rotation),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatFactor",[new f(e.ANIMATIONTYPE_FLOAT,"clearCoat.intensity",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatRoughnessFactor",[new f(e.ANIMATIONTYPE_FLOAT,"clearCoat.roughness",_,(()=>1))]);const N=x("clearCoat.texture");r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatTexture/extensions/KHR_texture_transform/scale",N.scale),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatTexture/extensions/KHR_texture_transform/offset",N.offset),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatTexture/extensions/KHR_texture_transform/rotation",N.rotation);const p=x("clearCoat.bumpTexture");r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatNormalTexture/scale",[new f(e.ANIMATIONTYPE_FLOAT,"clearCoat.bumpTexture.level",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatNormalTexture/extensions/KHR_texture_transform/scale",p.scale),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatNormalTexture/extensions/KHR_texture_transform/offset",p.offset),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatNormalTexture/extensions/KHR_texture_transform/rotation",p.rotation);const d=x("clearCoat.textureRoughness");r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatRoughnessTexture/extensions/KHR_texture_transform/scale",d.scale),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatRoughnessTexture/extensions/KHR_texture_transform/offset",d.offset),r("/materials/{}/extensions/KHR_materials_clearcoat/clearcoatRoughnessTexture/extensions/KHR_texture_transform/rotation",d.rotation),r("/materials/{}/extensions/KHR_materials_dispersion/dispersionFactor",[new f(e.ANIMATIONTYPE_FLOAT,"subSurface.dispersion",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_emissive_strength/emissiveStrength",[new f(e.ANIMATIONTYPE_FLOAT,"emissiveIntensity",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_ior/ior",[new f(e.ANIMATIONTYPE_FLOAT,"indexOfRefraction",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceFactor",[new f(e.ANIMATIONTYPE_FLOAT,"iridescence.intensity",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceIor",[new f(e.ANIMATIONTYPE_FLOAT,"iridescence.indexOfRefraction",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceThicknessMinimum",[new f(e.ANIMATIONTYPE_FLOAT,"iridescence.minimumThickness",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceThicknessMaximum",[new f(e.ANIMATIONTYPE_FLOAT,"iridescence.maximumThickness",_,(()=>1))]);const b=x("iridescence.texture");r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceTexture/extensions/KHR_texture_transform/scale",b.scale),r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceTexture/extensions/KHR_texture_transform/offset",b.offset),r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceTexture/extensions/KHR_texture_transform/rotation",b.rotation);const g=x("iridescence.thicknessTexture");r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceThicknessTexture/extensions/KHR_texture_transform/scale",g.scale),r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceThicknessTexture/extensions/KHR_texture_transform/offset",g.offset),r("/materials/{}/extensions/KHR_materials_iridescence/iridescenceThicknessTexture/extensions/KHR_texture_transform/rotation",g.rotation),r("/materials/{}/extensions/KHR_materials_sheen/sheenColorFactor",[new f(e.ANIMATIONTYPE_COLOR3,"sheen.color",l,(()=>3))]),r("/materials/{}/extensions/KHR_materials_sheen/sheenRoughnessFactor",[new f(e.ANIMATIONTYPE_FLOAT,"sheen.roughness",_,(()=>1))]);const M=x("sheen.texture");r("/materials/{}/extensions/KHR_materials_sheen/sheenColorTexture/extensions/KHR_texture_transform/scale",M.scale),r("/materials/{}/extensions/KHR_materials_sheen/sheenColorTexture/extensions/KHR_texture_transform/offset",M.offset),r("/materials/{}/extensions/KHR_materials_sheen/sheenColorTexture/extensions/KHR_texture_transform/rotation",M.rotation);const F=x("sheen.textureRoughness");r("/materials/{}/extensions/KHR_materials_sheen/sheenRoughnessTexture/extensions/KHR_texture_transform/scale",F.scale),r("/materials/{}/extensions/KHR_materials_sheen/sheenRoughnessTexture/extensions/KHR_texture_transform/offset",F.offset),r("/materials/{}/extensions/KHR_materials_sheen/sheenRoughnessTexture/extensions/KHR_texture_transform/rotation",F.rotation),r("/materials/{}/extensions/KHR_materials_specular/specularFactor",[new f(e.ANIMATIONTYPE_FLOAT,"metallicF0Factor",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_specular/specularColorFactor",[new f(e.ANIMATIONTYPE_COLOR3,"metallicReflectanceColor",l,(()=>3))]);const E=x("metallicReflectanceTexture");r("/materials/{}/extensions/KHR_materials_specular/specularTexture/extensions/KHR_texture_transform/scale",E.scale),r("/materials/{}/extensions/KHR_materials_specular/specularTexture/extensions/KHR_texture_transform/offset",E.offset),r("/materials/{}/extensions/KHR_materials_specular/specularTexture/extensions/KHR_texture_transform/rotation",E.rotation);const w=x("reflectanceTexture");r("/materials/{}/extensions/KHR_materials_specular/specularColorTexture/extensions/KHR_texture_transform/scale",w.scale),r("/materials/{}/extensions/KHR_materials_specular/specularColorTexture/extensions/KHR_texture_transform/offset",w.offset),r("/materials/{}/extensions/KHR_materials_specular/specularColorTexture/extensions/KHR_texture_transform/rotation",w.rotation),r("/materials/{}/extensions/KHR_materials_transmission/transmissionFactor",[new f(e.ANIMATIONTYPE_FLOAT,"subSurface.refractionIntensity",_,(()=>1))]);const L=x("subSurface.refractionIntensityTexture");r("/materials/{}/extensions/KHR_materials_transmission/transmissionTexture/extensions/KHR_texture_transform/scale",L.scale),r("/materials/{}/extensions/KHR_materials_transmission/transmissionTexture/extensions/KHR_texture_transform/offset",L.offset),r("/materials/{}/extensions/KHR_materials_transmission/transmissionTexture/extensions/KHR_texture_transform/rotation",L.rotation),r("/materials/{}/extensions/KHR_materials_volume/attenuationColor",[new f(e.ANIMATIONTYPE_COLOR3,"subSurface.tintColor",l,(()=>3))]),r("/materials/{}/extensions/KHR_materials_volume/attenuationDistance",[new f(e.ANIMATIONTYPE_FLOAT,"subSurface.tintColorAtDistance",_,(()=>1))]),r("/materials/{}/extensions/KHR_materials_volume/thicknessFactor",[new f(e.ANIMATIONTYPE_FLOAT,"subSurface.maximumThickness",_,(()=>1))]);const P=x("subSurface.thicknessTexture");r("/materials/{}/extensions/KHR_materials_volume/thicknessTexture/extensions/KHR_texture_transform/scale",P.scale),r("/materials/{}/extensions/KHR_materials_volume/thicknessTexture/extensions/KHR_texture_transform/offset",P.offset),r("/materials/{}/extensions/KHR_materials_volume/thicknessTexture/extensions/KHR_texture_transform/rotation",P.rotation),r("/materials/{}/extensions/KHR_materials_diffuse_transmission/diffuseTransmissionFactor",[new f(e.ANIMATIONTYPE_FLOAT,"subSurface.translucencyIntensity",_,(()=>1))]);const Y=x("subSurface.translucencyIntensityTexture");r("materials/{}/extensions/KHR_materials_diffuse_transmission/diffuseTransmissionTexture/extensions/KHR_texture_transform/scale",Y.scale),r("materials/{}/extensions/KHR_materials_diffuse_transmission/diffuseTransmissionTexture/extensions/KHR_texture_transform/offset",Y.offset),r("materials/{}/extensions/KHR_materials_diffuse_transmission/diffuseTransmissionTexture/extensions/KHR_texture_transform/rotation",Y.rotation),r("/materials/{}/extensions/KHR_materials_diffuse_transmission/diffuseTransmissionColorFactor",[new f(e.ANIMATIONTYPE_COLOR3,"subSurface.translucencyColor",l,(()=>3))]);const y=x("subSurface.translucencyColorTexture");r("materials/{}/extensions/KHR_materials_diffuse_transmission/diffuseTransmissionColorTexture/extensions/KHR_texture_transform/scale",y.scale),r("materials/{}/extensions/KHR_materials_diffuse_transmission/diffuseTransmissionColorTexture/extensions/KHR_texture_transform/offset",y.offset),r("materials/{}/extensions/KHR_materials_diffuse_transmission/diffuseTransmissionColorTexture/extensions/KHR_texture_transform/rotation",y.rotation),r("/extensions/KHR_lights_punctual/lights/{}/color",[new A(e.ANIMATIONTYPE_COLOR3,"diffuse",l,(()=>3))]),r("/extensions/KHR_lights_punctual/lights/{}/intensity",[new A(e.ANIMATIONTYPE_FLOAT,"intensity",_,(()=>1))]),r("/extensions/KHR_lights_punctual/lights/{}/range",[new A(e.ANIMATIONTYPE_FLOAT,"range",_,(()=>1))]),r("/extensions/KHR_lights_punctual/lights/{}/spot/innerConeAngle",[new A(e.ANIMATIONTYPE_FLOAT,"innerAngle",u,(()=>1))]),r("/extensions/KHR_lights_punctual/lights/{}/spot/outerConeAngle",[new A(e.ANIMATIONTYPE_FLOAT,"angle",u,(()=>1))]),r("/extensions/EXT_lights_area/lights/{}/color",[new A(e.ANIMATIONTYPE_COLOR3,"diffuse",l,(()=>3))]),r("/extensions/EXT_lights_area/lights/{}/intensity",[new A(e.ANIMATIONTYPE_FLOAT,"intensity",_,(()=>1))]),r("/extensions/EXT_lights_area/lights/{}/size",[new A(e.ANIMATIONTYPE_FLOAT,"radius",_,(()=>1))]),r("/extensions/EXT_lights_area/lights/{}/rect/aspect",[new A(e.ANIMATIONTYPE_FLOAT,"radius",_,(()=>1))]),r("/nodes/{}/extensions/EXT_lights_ies/color",[new A(e.ANIMATIONTYPE_COLOR3,"diffuse",l,(()=>3))]),r("/nodes/{}/extensions/EXT_lights_ies/multiplier",[new A(e.ANIMATIONTYPE_FLOAT,"intensity",_,(()=>1))]),r("/nodes/{}/extensions/KHR_node_visibility/visible",[new class extends o{buildAnimations(e,t,s,n){return e._primitiveBabylonMeshes?e._primitiveBabylonMeshes.map((e=>({babylonAnimatable:e,babylonAnimation:this._buildAnimation(t,s,n)}))):[]}}(e.ANIMATIONTYPE_FLOAT,"isVisible",_,(()=>1))]);const C="KHR_animation_pointer";class v{constructor(e){this.name=C,this._loader=e,this._pathToObjectConverter=i(this._loader.gltf)}get enabled(){return this._loader.isExtensionUsed(C)}dispose(){this._loader=null,delete this._pathToObjectConverter}_loadAnimationChannelAsync(e,t,n,a,r){const i=a.target.extensions?.KHR_animation_pointer;if(!i||!this._pathToObjectConverter)return null;"pointer"!==a.target.path&&s.Warn(`${e}/target/path: Value (${a.target.path}) must be (pointer) when using the ${this.name} extension`),null!=a.target.node&&s.Warn(`${e}/target/node: Value (${a.target.node}) must not be present when using the ${this.name} extension`);const o=`${e}/extensions/${this.name}`,l=i.pointer;if(!l)throw new Error(`${o}: Pointer is missing`);try{const s=this._pathToObjectConverter.convert(l);if(!s.info.interpolation)throw new Error(`${o}/pointer: Interpolation is missing`);return this._loader._loadAnimationChannelFromTargetInfoAsync(e,t,n,a,{object:s.object,info:s.info.interpolation},r)}catch(e){return s.Warn(`${o}/pointer: Invalid pointer (${l}) skipped`),null}}}n(C),a(C,!0,(e=>new v(e)));export{v as KHR_animation_pointer};
//# sourceMappingURL=KHR_animation_pointer-B6agqWfy.esm.min.js.map
